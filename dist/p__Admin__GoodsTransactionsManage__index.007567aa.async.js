"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[722],{5966:function(K,I,e){var j=e(97685),_=e(1413),Z=e(91),B=e(21770),T=e(25040),v=e(55241),R=e(98423),y=e(67294),M=e(21885),P=e(85893),b=["fieldProps","proFieldProps"],O=["fieldProps","proFieldProps"],E="text",f=function(o){var t=o.fieldProps,h=o.proFieldProps,d=(0,Z.Z)(o,b);return(0,P.jsx)(M.Z,(0,_.Z)({valueType:E,fieldProps:t,filedConfig:{valueType:E},proFieldProps:h},d))},D=function(o){var t=(0,B.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),h=(0,j.Z)(t,2),d=h[0],i=h[1];return(0,P.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(l){var n,u=l.getFieldValue(o.name||[]);return(0,P.jsx)(v.Z,(0,_.Z)((0,_.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return i(r)},content:(0,P.jsxs)("div",{style:{padding:"4px 0"},children:[(n=o.statusRender)===null||n===void 0?void 0:n.call(o,u),o.strengthText?(0,P.jsx)("div",{style:{marginTop:10},children:(0,P.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:d,children:o.children}))}})},c=function(o){var t=o.fieldProps,h=o.proFieldProps,d=(0,Z.Z)(o,O),i=(0,y.useState)(!1),a=(0,j.Z)(i,2),l=a[0],n=a[1];return t!=null&&t.statusRender&&d.name?(0,P.jsx)(D,{name:d.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:l,onOpenChange:n,children:(0,P.jsx)("div",{children:(0,P.jsx)(M.Z,(0,_.Z)({valueType:"password",fieldProps:(0,_.Z)((0,_.Z)({},(0,R.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(s){var r;t==null||(r=t.onBlur)===null||r===void 0||r.call(t,s),n(!1)},onClick:function(s){var r;t==null||(r=t.onClick)===null||r===void 0||r.call(t,s),n(!0)}}),proFieldProps:h,filedConfig:{valueType:E}},d))})}):(0,P.jsx)(M.Z,(0,_.Z)({valueType:"password",fieldProps:t,proFieldProps:h,filedConfig:{valueType:E}},d))},g=f;g.Password=c,g.displayName="ProFormComponent",I.Z=g},96906:function(K,I,e){e.d(I,{Z:function(){return h}});var j=e(91),_=e(1413),Z=e(56874),B=e(87462),T=e(67294),v=e(29245),R=e(32867),y=function(i,a){return T.createElement(R.Z,(0,B.Z)({},i,{ref:a,icon:v.Z}))},M=T.forwardRef(y),P=M,b=e(86413),O=e(21532),E=e(85418),f=e(83622),D=e(93967),c=e.n(D),g=e(85893),C=["key","name"],o=function(i){var a=i.children,l=i.menus,n=i.onSelect,u=i.className,s=i.style,r=(0,T.useContext)(O.ZP.ConfigContext),m=r.getPrefixCls,A=m("pro-table-dropdown"),p=(0,b.Q)({onClick:function(x){return n&&n(x.key)},items:l==null?void 0:l.map(function(S){return{label:S.name,key:S.key}})});return(0,g.jsx)(E.Z,(0,_.Z)((0,_.Z)({},p),{},{className:c()(A,u),children:(0,g.jsxs)(f.ZP,{style:s,children:[a," ",(0,g.jsx)(Z.Z,{})]})}))},t=function(i){var a=i.className,l=i.style,n=i.onSelect,u=i.menus,s=u===void 0?[]:u,r=i.children,m=(0,T.useContext)(O.ZP.ConfigContext),A=m.getPrefixCls,p=A("pro-table-dropdown"),S=(0,b.Q)({onClick:function(W){n==null||n(W.key)},items:s.map(function(x){var W=x.key,F=x.name,U=(0,j.Z)(x,C);return(0,_.Z)((0,_.Z)({key:W},U),{},{title:U.title,label:F})})});return(0,g.jsx)(E.Z,(0,_.Z)((0,_.Z)({},S),{},{className:c()(p,a),children:(0,g.jsx)("a",{style:l,children:r||(0,g.jsx)(P,{})})}))};t.Button=o;var h=t},53398:function(K,I,e){e.r(I);var j=e(97857),_=e.n(j),Z=e(5574),B=e.n(Z),T=e(15009),v=e.n(T),R=e(99289),y=e.n(R),M=e(96906),P=e(51930),b=e(37476),O=e(5966),E=e(67294),f=e(2453),D=e(34955),c=e(85893),g=[{dataIndex:"id",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(o,t,h){return h+1}},{title:"\u5546\u54C1ID",dataIndex:"goodsId",hideInSearch:!1},{title:"\u4F1A\u5458ID",dataIndex:"memberId",hideInSearch:!1},{title:"\u8D2D\u4E70\u6570\u91CF",dataIndex:"count",hideInSearch:!0},{title:"\u603B\u4EF7",dataIndex:"price",hideInSearch:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(o,t,h,d){return[(0,c.jsx)("a",{onClick:function(){if(t.id){var a;d==null||(a=d.startEditable)===null||a===void 0||a.call(d,t.id)}},children:"\u7F16\u8F91"},"editable"),(0,c.jsx)(M.Z,{onSelect:function(){var i=y()(v()().mark(function a(l){var n;return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(l==="delete"&&t.id)){s.next=13;break}return s.prev=1,s.next=4,(0,D.Z)("/api/goodsTransactions/delete",{method:"POST",data:{id:t.id}});case 4:n=s.sent,console.log("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",n),n?(f.ZP.success("\u5220\u9664\u6210\u529F"),d==null||d.reload()):f.ZP.error("\u5220\u9664\u5931\u8D25"),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(1),console.error("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",s.t0),f.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return s.stop()}},a,null,[[1,9]])}));return function(a){return i.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];I.default=function(){var C=(0,E.useRef)(),o=(0,E.useState)(!1),t=B()(o,2),h=t[0],d=t[1],i=function(){var a=y()(v()().mark(function l(n){var u,s;return v()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,D.Z)("/api/goodsTransactions/add",{method:"POST",data:n});case 3:u=m.sent,console.log("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",u),u?(f.ZP.success("\u6DFB\u52A0\u6210\u529F"),d(!1),(s=C.current)===null||s===void 0||s.reload()):f.ZP.error("\u6DFB\u52A0\u5931\u8D25"),m.next=12;break;case 8:m.prev=8,m.t0=m.catch(0),console.error("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",m.t0),f.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return m.stop()}},l,null,[[0,8]])}));return function(n){return a.apply(this,arguments)}}();return(0,c.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,c.jsx)(P.Z,{columns:g,actionRef:C,cardBordered:!0,toolBarRender:function(){return[(0,c.jsx)("a",{onClick:function(){d(!0)},children:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55"},"add")]},request:function(){var a=y()(v()().mark(function l(n){var u;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",n),r.prev=1,r.next=4,(0,D.Z)("/api/goodsTransactions/list/page/vo",{method:"POST",data:{current:n.current,pageSize:n.pageSize,goodsId:n.goodsId,memberId:n.memberId,countMin:n.countMin,countMax:n.countMax,priceMin:n.priceMin,priceMax:n.priceMax,createTimeStart:n.createTimeStart,createTimeEnd:n.createTimeEnd,sortField:n.sortField,sortOrder:n.sortOrder}});case 4:return u=r.sent,console.log("\u54CD\u5E94\u6570\u636E:",u),r.abrupt("return",{data:u.records||[],success:!0,total:Number(u.total)||0});case 9:return r.prev=9,r.t0=r.catch(1),console.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25:",r.t0),f.ZP.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25"),r.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return r.stop()}},l,null,[[1,9]])}));return function(l){return a.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var a=y()(v()().mark(function n(u,s){var r,m;return v()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,D.Z)("/api/goodsTransactions/update",{method:"POST",data:{id:s.id,goodsId:s.goodsId,memberId:s.memberId,count:s.count,price:s.price}});case 3:r=p.sent,console.log("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",r),r?(f.ZP.success("\u66F4\u65B0\u6210\u529F"),(m=C.current)===null||m===void 0||m.reload()):f.ZP.error("\u66F4\u65B0\u5931\u8D25"),p.next=12;break;case 8:p.prev=8,p.t0=p.catch(0),console.error("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",p.t0),f.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return p.stop()}},n,null,[[0,8]])}));function l(n,u){return a.apply(this,arguments)}return l}()},columnsState:{persistenceKey:"goods-transactions-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"id",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(l){return console.log(l)}},dateFormatter:"string",headerTitle:""}),(0,c.jsxs)(b.Y,{title:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55",width:"400px",open:h,onOpenChange:d,onFinish:function(){var a=y()(v()().mark(function l(n){var u;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=_()(_()({},n),{},{goodsId:Number(n.goodsId),memberId:n.memberId,count:Number(n.count),price:Number(n.price)}),r.next=3,i(u);case 3:case"end":return r.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,c.jsx)(O.Z,{name:"goodsId",label:"\u5546\u54C1ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1ID"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57ID"}]}),(0,c.jsx)(O.Z,{name:"memberId",label:"\u4F1A\u5458ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F1A\u5458ID"}]}),(0,c.jsx)(O.Z,{name:"count",label:"\u8D2D\u4E70\u6570\u91CF",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D2D\u4E70\u6570\u91CF"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57"}]}),(0,c.jsx)(O.Z,{name:"price",label:"\u5355\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"},{pattern:/^\d+(\.\d{1,2})?$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u91D1\u989D"}]})]})]})}}}]);
