"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[722],{53398:function(A,I,s){s.r(I);var M=s(97857),P=s.n(M),D=s(5574),T=s.n(D),O=s(15009),i=s.n(O),j=s(99289),p=s.n(j),C=s(96906),B=s(51930),S=s(37476),g=s(5966),y=s(67294),_=s(2453),h=s(34955),m=s(85893),R=[{dataIndex:"id",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(v,c,b){return b+1}},{title:"\u5546\u54C1ID",dataIndex:"goodsId",hideInSearch:!1},{title:"\u4F1A\u5458ID",dataIndex:"memberId",hideInSearch:!1},{title:"\u8D2D\u4E70\u6570\u91CF",dataIndex:"count",hideInSearch:!0},{title:"\u603B\u4EF7",dataIndex:"price",hideInSearch:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(v,c,b,d){return[(0,m.jsx)("a",{onClick:function(){if(c.id){var a;d==null||(a=d.startEditable)===null||a===void 0||a.call(d,c.id)}},children:"\u7F16\u8F91"},"editable"),(0,m.jsx)(C.Z,{onSelect:function(){var E=p()(i()().mark(function a(t){var e;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t==="delete"&&c.id)){r.next=13;break}return r.prev=1,r.next=4,(0,h.Z)("/api/goodsTransactions/delete",{method:"POST",data:{id:c.id}});case 4:e=r.sent,console.log("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",e),e?(_.ZP.success("\u5220\u9664\u6210\u529F"),d==null||d.reload()):_.ZP.error("\u5220\u9664\u5931\u8D25"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.error("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",r.t0),_.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return r.stop()}},a,null,[[1,9]])}));return function(a){return E.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];I.default=function(){var f=(0,y.useRef)(),v=(0,y.useState)(!1),c=T()(v,2),b=c[0],d=c[1],E=function(){var a=p()(i()().mark(function t(e){var l,r;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,h.Z)("/api/goodsTransactions/add",{method:"POST",data:e});case 3:l=u.sent,console.log("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",l),l?(_.ZP.success("\u6DFB\u52A0\u6210\u529F"),d(!1),(r=f.current)===null||r===void 0||r.reload()):_.ZP.error("\u6DFB\u52A0\u5931\u8D25"),u.next=12;break;case 8:u.prev=8,u.t0=u.catch(0),console.error("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",u.t0),_.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return u.stop()}},t,null,[[0,8]])}));return function(e){return a.apply(this,arguments)}}();return(0,m.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,m.jsx)(B.Z,{columns:R,actionRef:f,cardBordered:!0,toolBarRender:function(){return[(0,m.jsx)("a",{onClick:function(){d(!0)},children:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55"},"add")]},request:function(){var a=p()(i()().mark(function t(e){var l;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",e),n.prev=1,n.next=4,(0,h.Z)("/api/goodsTransactions/list/page/vo",{method:"POST",data:{current:e.current,pageSize:e.pageSize,goodsId:e.goodsId,memberId:e.memberId,countMin:e.countMin,countMax:e.countMax,priceMin:e.priceMin,priceMax:e.priceMax,createTimeStart:e.createTimeStart,createTimeEnd:e.createTimeEnd,sortField:e.sortField,sortOrder:e.sortOrder}});case 4:return l=n.sent,console.log("\u54CD\u5E94\u6570\u636E:",l),n.abrupt("return",{data:l.records||[],success:!0,total:Number(l.total)||0});case 9:return n.prev=9,n.t0=n.catch(1),console.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25:",n.t0),_.ZP.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25"),n.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(t){return a.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var a=p()(i()().mark(function e(l,r){var n,u;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,h.Z)("/api/goodsTransactions/update",{method:"POST",data:{id:r.id,goodsId:r.goodsId,memberId:r.memberId,count:r.count,price:r.price}});case 3:n=o.sent,console.log("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",n),n?(_.ZP.success("\u66F4\u65B0\u6210\u529F"),(u=f.current)===null||u===void 0||u.reload()):_.ZP.error("\u66F4\u65B0\u5931\u8D25"),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(0),console.error("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",o.t0),_.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return o.stop()}},e,null,[[0,8]])}));function t(e,l){return a.apply(this,arguments)}return t}()},columnsState:{persistenceKey:"goods-transactions-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"id",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(t){return console.log(t)}},dateFormatter:"string",headerTitle:""}),(0,m.jsxs)(S.Y,{title:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55",width:"400px",open:b,onOpenChange:d,onFinish:function(){var a=p()(i()().mark(function t(e){var l;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=P()(P()({},e),{},{goodsId:Number(e.goodsId),memberId:e.memberId,count:Number(e.count),price:Number(e.price)}),n.next=3,E(l);case 3:case"end":return n.stop()}},t)}));return function(t){return a.apply(this,arguments)}}(),children:[(0,m.jsx)(g.Z,{name:"goodsId",label:"\u5546\u54C1ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1ID"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57ID"}]}),(0,m.jsx)(g.Z,{name:"memberId",label:"\u4F1A\u5458ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F1A\u5458ID"}]}),(0,m.jsx)(g.Z,{name:"count",label:"\u8D2D\u4E70\u6570\u91CF",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D2D\u4E70\u6570\u91CF"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57"}]}),(0,m.jsx)(g.Z,{name:"price",label:"\u5355\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"},{pattern:/^\d+(\.\d{1,2})?$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u91D1\u989D"}]})]})]})}}}]);
