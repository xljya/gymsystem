"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[848],{41482:function($,j,e){e.d(j,{Ih:function(){return C},_6:function(){return T},jT:function(){return I},q5:function(){return w},rC:function(){return R}});var N=e(15009),r=e.n(N),M=e(97857),l=e.n(M),b=e(99289),_=e.n(b),f=e(34955);function R(t,a){return A.apply(this,arguments)}function A(){return A=_()(r()().mark(function t(a,u){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.Z)("/api/equipment/add",l()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return s.stop()}},t)})),A.apply(this,arguments)}function C(t,a){return c.apply(this,arguments)}function c(){return c=_()(r()().mark(function t(a,u){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.Z)("/api/equipment/delete",l()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return s.stop()}},t)})),c.apply(this,arguments)}function W(t,a){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,u){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/equipment/get",_objectSpread({method:"GET",params:_objectSpread({},a)},u||{})));case 1:case"end":return s.stop()}},t)})),E.apply(this,arguments)}function T(t,a){return x.apply(this,arguments)}function x(){return x=_()(r()().mark(function t(a,u){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.Z)("/api/equipment/get/vo",l()({method:"GET",params:l()({},a)},u||{})));case 1:case"end":return s.stop()}},t)})),x.apply(this,arguments)}function w(t,a){return U.apply(this,arguments)}function U(){return U=_()(r()().mark(function t(a,u){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.Z)("/api/equipment/list/page/vo",l()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return s.stop()}},t)})),U.apply(this,arguments)}function I(t,a){return L.apply(this,arguments)}function L(){return L=_()(r()().mark(function t(a,u){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.Z)("/api/equipment/update",l()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return s.stop()}},t)})),L.apply(this,arguments)}},57636:function($,j,e){e.d(j,{z:function(){return W}});var N=e(97857),r=e.n(N),M=e(13769),l=e.n(M),b=e(67294),_=e(88426),f=e(12003),R=e(27080),A=e(85893),C=["className","variant","size","asChild"],c=(0,f.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=b.forwardRef(function(E,T){var x=E.className,w=E.variant,U=E.size,I=E.asChild,L=I===void 0?!1:I,t=l()(E,C),a=L?_.g7:"button";return(0,A.jsx)(a,r()({className:(0,R.cn)(c({variant:w,size:U,className:x})),ref:T},t))});W.displayName="Button"},87030:function($,j,e){e.d(j,{Zb:function(){return T},aY:function(){return I},eW:function(){return L}});var N=e(97857),r=e.n(N),M=e(13769),l=e.n(M),b=e(67294),_=e(27080),f=e(85893),R=["className"],A=["className"],C=["className"],c=["className"],W=["className"],E=["className"],T=b.forwardRef(function(t,a){var u=t.className,m=l()(t,R);return(0,f.jsx)("div",r()({ref:a,className:(0,_.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",u)},m))});T.displayName="Card";var x=b.forwardRef(function(t,a){var u=t.className,m=l()(t,A);return(0,f.jsx)("div",r()({ref:a,className:(0,_.cn)("flex flex-col space-y-1.5 p-6",u)},m))});x.displayName="CardHeader";var w=b.forwardRef(function(t,a){var u=t.className,m=l()(t,C);return(0,f.jsx)("h3",r()({ref:a,className:(0,_.cn)("text-2xl font-semibold leading-none tracking-tight",u)},m))});w.displayName="CardTitle";var U=b.forwardRef(function(t,a){var u=t.className,m=l()(t,c);return(0,f.jsx)("p",r()({ref:a,className:(0,_.cn)("text-sm text-muted-foreground",u)},m))});U.displayName="CardDescription";var I=b.forwardRef(function(t,a){var u=t.className,m=l()(t,W);return(0,f.jsx)("div",r()({ref:a,className:(0,_.cn)("p-6 pt-0",u)},m))});I.displayName="CardContent";var L=b.forwardRef(function(t,a){var u=t.className,m=l()(t,E);return(0,f.jsx)("div",r()({ref:a,className:(0,_.cn)("flex items-center p-6 pt-0",u)},m))});L.displayName="CardFooter"},27877:function($,j,e){e.r(j),e.d(j,{default:function(){return Ce}});var N=e(97857),r=e.n(N),M=e(15009),l=e.n(M),b=e(19632),_=e.n(b),f=e(99289),R=e.n(f),A=e(5574),C=e.n(A),c=e(67294),W=e(13854),E=e(57636),T=e(87030),x=e(51758),w=e(97013),U=e(91373);const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],L=(0,U.Z)("circle-help",I);var t=e(90930),a=e(2453),u=e(74330),m=e(32983),s=e(41482),ye=e(34955);function Oe(y,p){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function y(p,h){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/equipment/category/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:p},h||{})));case 1:case"end":return i.stop()}},y)})),k.apply(this,arguments)}function Te(y,p){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function y(p,h){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/equipment/category/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:p},h||{})));case 1:case"end":return i.stop()}},y)})),Q.apply(this,arguments)}function Be(y,p){return ee.apply(this,arguments)}function ee(){return ee=_asyncToGenerator(_regeneratorRuntime().mark(function y(p,h){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/equipment/category/get/vo",_objectSpread({method:"GET",params:_objectSpread({},p)},h||{})));case 1:case"end":return i.stop()}},y)})),ee.apply(this,arguments)}function he(y,p){return te.apply(this,arguments)}function te(){return te=R()(l()().mark(function y(p,h){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ye.Z)("/api/equipment/category/list/page/vo",r()({method:"POST",headers:{"Content-Type":"application/json"},data:p},h||{})));case 1:case"end":return i.stop()}},y)})),te.apply(this,arguments)}function Se(y,p){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function y(p,h){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/equipment/category/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:p},h||{})));case 1:case"end":return i.stop()}},y)})),ne.apply(this,arguments)}var n=e(85893),ve=[{id:"all",name:"\u5168\u90E8",icon:(0,n.jsx)(x.Z,{className:"w-5 h-5"})},{name:"\u6709\u6C27\u5668\u68B0",icon:(0,n.jsx)(w.Z,{className:"w-5 h-5"})},{name:"\u529B\u91CF\u5668\u68B0",icon:(0,n.jsx)(x.Z,{className:"w-5 h-5"})},{name:"\u529F\u80FD\u6027\u8BAD\u7EC3\u5668\u68B0",icon:(0,n.jsx)(x.Z,{className:"w-5 h-5"})},{name:"\u5065\u8EAB\u914D\u4EF6",icon:(0,n.jsx)(w.Z,{className:"w-5 h-5"})}],ae=function(p){if(!p)return(0,n.jsx)(L,{className:"w-5 h-5"});var h=ve.find(function(B){return B.name===p});return h&&h.icon?h.icon:(0,n.jsx)(L,{className:"w-5 h-5"})},Ee=function(){var p=(0,W.lr)(),h=C()(p,2),B=h[0],i=h[1],je=(0,c.useState)([]),se=C()(je,2),G=se[0],oe=se[1],be=(0,c.useState)(!0),ie=C()(be,2),V=ie[0],ue=ie[1],xe=(0,c.useState)(function(){return B.get("category_id")||"0"}),le=C()(xe,2),q=le[0],de=le[1],Pe=(0,c.useState)([]),ce=C()(Pe,2),me=ce[0],re=ce[1],De=(0,c.useState)(!0),pe=C()(De,2),Ne=pe[0],ge=pe[1],Me=(0,c.useState)({current:1,pageSize:12,total:0}),_e=C()(Me,2),H=_e[0],Y=_e[1];(0,c.useEffect)(function(){console.log("[EquipmentList] Initial activeCategoryId from state/URL:",q)},[]),(0,c.useEffect)(function(){var o=function(){var P=R()(l()().mark(function O(){var F,D,K,S,J,d;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("[EquipmentList] Fetching equipment categories..."),ue(!0),v.prev=2,v.next=5,he({current:1,pageSize:50});case 5:D=v.sent,console.log("[EquipmentList] Raw categories response:",JSON.stringify(D,null,2)),K=[],S=(D==null?void 0:D.records)||(D==null||(F=D.data)===null||F===void 0?void 0:F.records),S&&Array.isArray(S)?(console.log("[EquipmentList] Records array found, length:",S.length),console.log("[EquipmentList] First record example:",S[0]),K=S.map(function(z,g){console.log("[EquipmentList] Processing record ".concat(g,":"),z),console.log("[EquipmentList] cat.eqcategoryId:",z.eqcategoryId),console.log("[EquipmentList] cat.categoryName:",z.categoryName);var Z={id:String(z.eqcategoryId),name:z.categoryName||"\u672A\u77E5\u5206\u7C7B",icon:ae(z.categoryName)};return console.log("[EquipmentList] Mapped category ".concat(g,":"),Z),Z}),console.log("[EquipmentList] All mapped fetchedCategories:",K)):console.log("[EquipmentList] No records found or records is not an array. Response:",D),J={id:"0",name:"\u5168\u90E8",icon:ae("\u5168\u90E8")},d=[J].concat(_()(K)),console.log("[EquipmentList] Final displayCategories to set:",d),oe(d),console.log("[EquipmentList] setDisplayCategories called with:",d.length,"categories"),v.next=22;break;case 17:v.prev=17,v.t0=v.catch(2),console.error("[EquipmentList] \u83B7\u53D6\u5668\u68B0\u5206\u7C7B\u5931\u8D25:",v.t0),a.ZP.error("\u83B7\u53D6\u5668\u68B0\u5206\u7C7B\u5931\u8D25"),oe([{id:"0",name:"\u5168\u90E8",icon:ae("\u5168\u90E8")}]);case 22:return v.prev=22,ue(!1),console.log("[EquipmentList] Categories loading finished."),v.finish(22);case 26:case"end":return v.stop()}},O,null,[[2,17,22,26]])}));return function(){return P.apply(this,arguments)}}();o()},[]),(0,c.useEffect)(function(){if(!V&&G.length>0){var o=B.get("category_id");console.log("[EquipmentList] URL category_id param:",o),o&&G.find(function(P){return P.id===o})?q!==o&&(console.log("[EquipmentList] Setting activeCategoryId from URL param:",o),de(o)):!o&&q!=="0"&&(console.log("[EquipmentList] No category_id in URL, defaulting activeCategoryId to '0'."),de("0"))}},[B,G,V,q]);var Le=function(){var o=R()(l()().mark(function P(O,F,D){var K,S,J,d,X,v;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("[EquipmentList] Fetching data for category ID: ".concat(O,", page: ").concat(F)),ge(!0),g.prev=2,J={current:F,pageSize:D,eqcategoryId:O==="0"?void 0:Number(O)},g.next=6,(0,s.q5)(J);case 6:d=g.sent,console.log("[EquipmentList] Equipments API response:",JSON.stringify(d,null,2)),X=(d==null?void 0:d.records)||(d==null||(K=d.data)===null||K===void 0?void 0:K.records),v=(d==null?void 0:d.total)||(d==null||(S=d.data)===null||S===void 0?void 0:S.total),X?(re(X),Y(function(Z){return r()(r()({},Z),{},{total:v||0,current:F})})):(a.ZP.error((d==null?void 0:d.message)||"\u83B7\u53D6\u5668\u68B0\u5217\u8868\u5931\u8D25\u6216\u5217\u8868\u4E3A\u7A7A"),re([]),Y(function(Z){return r()(r()({},Z),{},{total:0,current:1})})),g.next=19;break;case 13:g.prev=13,g.t0=g.catch(2),console.error("[EquipmentList] \u83B7\u53D6\u5668\u68B0\u5217\u8868\u5931\u8D25:",g.t0),a.ZP.error((g.t0===null||g.t0===void 0?void 0:g.t0.message)||"\u83B7\u53D6\u5668\u68B0\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),re([]),Y(function(Z){return r()(r()({},Z),{},{total:0,current:1})});case 19:return g.prev=19,ge(!1),g.finish(19);case 22:case"end":return g.stop()}},P,null,[[2,13,19,22]])}));return function(O,F,D){return o.apply(this,arguments)}}();(0,c.useEffect)(function(){V||(console.log("[EquipmentList] Fetching equipments based on activeCategoryId:",q,"Page:",H.current),Le(q,H.current,H.pageSize))},[q,H.current,H.pageSize,V]);var fe=function(P){console.log("[EquipmentList] Category changed to:",P),Y(function(O){return r()(r()({},O),{},{current:1})}),i(P==="0"?{}:{category_id:P})};return(0,c.useEffect)(function(){console.log("[EquipmentList] displayCategories state updated:",G)},[G]),(0,n.jsxs)("div",{style:{position:"relative",margin:"-24px -24px 0",width:"calc(100% + 48px)"},children:[(0,n.jsx)("div",{className:"bg-gym-primary text-white py-16 w-full",style:{position:"relative",zIndex:10,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",paddingTop:"8rem",paddingBottom:"4rem",marginTop:"2rem"},children:(0,n.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"\u5668\u68B0\u5C55\u793A"}),(0,n.jsx)("p",{className:"text-white/80 max-w-2xl mx-auto",children:"\u63A2\u7D22\u6211\u4EEC\u4E30\u5BCC\u591A\u6837\u7684\u5065\u8EAB\u5668\u68B0\uFF0C\u4E3A\u60A8\u7684\u5065\u8EAB\u623F\u6253\u9020\u5B8C\u7F8E\u914D\u7F6E"})]})}),(0,n.jsx)(t._z,{header:{title:!1,breadcrumb:{items:[]}},style:{backgroundColor:"transparent",padding:0,marginTop:"-24px"},children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[V?(0,n.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,n.jsx)(u.Z,{tip:"\u52A0\u8F7D\u5206\u7C7B\u4E2D..."})}):(0,n.jsx)("div",{className:"flex flex-wrap gap-3 mb-10 justify-center",children:G.map(function(o){return(0,n.jsxs)(E.z,{variant:q===o.id?"default":"outline",className:"flex items-center gap-2 ".concat(q===o.id?"bg-gym-primary hover:bg-gym-primary/90":"border-gym-gray/30 text-gym-primary"),onClick:function(){return fe(o.id)},children:[o.icon,o.name]},o.id)})}),Ne?(0,n.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,n.jsx)(u.Z,{size:"large",tip:"\u52A0\u8F7D\u5668\u68B0\u4E2D..."})}):(0,n.jsx)(n.Fragment,{children:me.length>0?(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:me.map(function(o){return(0,n.jsxs)(T.Zb,{className:"overflow-hidden hover-scale flex flex-col",children:[(0,n.jsx)("div",{className:"relative h-60 overflow-hidden bg-gray-100 border flex items-center justify-center p-1",children:(0,n.jsx)("img",{src:o.image||"/placeholder-image.png",alt:o.eqName||"\u5668\u68B0\u56FE\u7247",className:"w-full h-full object-contain",onError:function(O){O.target.src="/placeholder-image.png"}})}),(0,n.jsxs)(T.aY,{className:"pt-6 flex-grow",children:[o.categoryName&&(0,n.jsx)("p",{className:"text-xs text-gym-primary mb-1",children:o.categoryName}),(0,n.jsx)("h3",{className:"text-xl font-bold mb-2 truncate",title:o.eqName||"",children:o.eqName})]}),(0,n.jsx)(T.eW,{children:(0,n.jsx)(E.z,{variant:"outline",className:"w-full border-gym-primary text-gym-primary hover:bg-gym-primary hover:text-white",asChild:!0,children:(0,n.jsx)(W.rU,{to:"/equipment/".concat(o.eqId),children:"\u67E5\u770B\u8BE6\u60C5"})})})]},o.eqId)})}):(0,n.jsx)("div",{className:"text-center py-16",children:(0,n.jsxs)(m.Z,{description:!1,image:(0,n.jsx)(x.Z,{className:"w-16 h-16 text-gym-gray mx-auto mb-4"}),children:[(0,n.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"\u672A\u627E\u5230\u5668\u68B0"}),(0,n.jsx)("p",{className:"text-gym-gray",children:"\u5F53\u524D\u5206\u7C7B\u4E0B\u6CA1\u6709\u53EF\u7528\u7684\u5668\u68B0\uFF0C\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u5206\u7C7B"}),(0,n.jsx)(E.z,{className:"mt-4 bg-gym-primary hover:bg-gym-primary/90",onClick:function(){return fe("0")},children:"\u67E5\u770B\u6240\u6709\u5668\u68B0"})]})})})]})})]})},Ce=Ee},97013:function($,j,e){e.d(j,{Z:function(){return M}});var N=e(91373);const r=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],M=(0,N.Z)("bike",r)},51758:function($,j,e){e.d(j,{Z:function(){return M}});var N=e(91373);const r=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],M=(0,N.Z)("dumbbell",r)}}]);
