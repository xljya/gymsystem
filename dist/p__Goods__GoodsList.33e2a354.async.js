"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[259],{38476:function(W,h,e){e.d(h,{Ev:function(){return G},Gs:function(){return S},IG:function(){return F},ag:function(){return p},u0:function(){return T}});var C=e(15009),a=e.n(C),x=e(97857),d=e.n(x),j=e(99289),_=e.n(j),g=e(34955);function S(i,l){return M.apply(this,arguments)}function M(){return M=_()(a()().mark(function i(l,o){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.Z)("/api/goods/add",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return r.stop()}},i)})),M.apply(this,arguments)}function p(i,l){return u.apply(this,arguments)}function u(){return u=_()(a()().mark(function i(l,o){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.Z)("/api/goods/delete",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return r.stop()}},i)})),u.apply(this,arguments)}function T(i,l){return f.apply(this,arguments)}function f(){return f=_()(a()().mark(function i(l,o){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.Z)("/api/goods/get/vo",d()({method:"GET",params:d()({},l)},o||{})));case 1:case"end":return r.stop()}},i)})),f.apply(this,arguments)}function G(i,l){return A.apply(this,arguments)}function A(){return A=_()(a()().mark(function i(l,o){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.Z)("/api/goods/list/page/vo",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return r.stop()}},i)})),A.apply(this,arguments)}function F(i,l){return B.apply(this,arguments)}function B(){return B=_()(a()().mark(function i(l,o){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.Z)("/api/goods/update",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return r.stop()}},i)})),B.apply(this,arguments)}},57636:function(W,h,e){e.d(h,{z:function(){return T}});var C=e(97857),a=e.n(C),x=e(13769),d=e.n(x),j=e(67294),_=e(88426),g=e(12003),S=e(27080),M=e(85893),p=["className","variant","size","asChild"],u=(0,g.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=j.forwardRef(function(f,G){var A=f.className,F=f.variant,B=f.size,i=f.asChild,l=i===void 0?!1:i,o=d()(f,p),c=l?_.g7:"button";return(0,M.jsx)(c,a()({className:(0,S.cn)(u({variant:F,size:B,className:A})),ref:G},o))});T.displayName="Button"},87030:function(W,h,e){e.d(h,{Zb:function(){return G},aY:function(){return i},eW:function(){return l}});var C=e(97857),a=e.n(C),x=e(13769),d=e.n(x),j=e(67294),_=e(27080),g=e(85893),S=["className"],M=["className"],p=["className"],u=["className"],T=["className"],f=["className"],G=j.forwardRef(function(o,c){var r=o.className,D=d()(o,S);return(0,g.jsx)("div",a()({ref:c,className:(0,_.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},D))});G.displayName="Card";var A=j.forwardRef(function(o,c){var r=o.className,D=d()(o,M);return(0,g.jsx)("div",a()({ref:c,className:(0,_.cn)("flex flex-col space-y-1.5 p-6",r)},D))});A.displayName="CardHeader";var F=j.forwardRef(function(o,c){var r=o.className,D=d()(o,p);return(0,g.jsx)("h3",a()({ref:c,className:(0,_.cn)("text-2xl font-semibold leading-none tracking-tight",r)},D))});F.displayName="CardTitle";var B=j.forwardRef(function(o,c){var r=o.className,D=d()(o,u);return(0,g.jsx)("p",a()({ref:c,className:(0,_.cn)("text-sm text-muted-foreground",r)},D))});B.displayName="CardDescription";var i=j.forwardRef(function(o,c){var r=o.className,D=d()(o,T);return(0,g.jsx)("div",a()({ref:c,className:(0,_.cn)("p-6 pt-0",r)},D))});i.displayName="CardContent";var l=j.forwardRef(function(o,c){var r=o.className,D=d()(o,f);return(0,g.jsx)("div",a()({ref:c,className:(0,_.cn)("flex items-center p-6 pt-0",r)},D))});l.displayName="CardFooter"},27591:function(W,h,e){e.d(h,{I:function(){return M}});var C=e(97857),a=e.n(C),x=e(13769),d=e.n(x),j=e(67294),_=e(27080),g=e(85893),S=["className","type"],M=j.forwardRef(function(p,u){var T=p.className,f=p.type,G=d()(p,S);return(0,g.jsx)("input",a()({type:f,className:(0,_.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",T),ref:u},G))});M.displayName="Input"},87056:function(W,h,e){e.r(h),e.d(h,{default:function(){return xe}});var C=e(97857),a=e.n(C),x=e(15009),d=e.n(x),j=e(19632),_=e.n(j),g=e(99289),S=e.n(g),M=e(5574),p=e.n(M),u=e(67294),T=e(13854),f=e(57636),G=e(87030),A=e(24349),F=e(87764),B=e(28463),i=e(27591),l=e(90930),o=e(2453),c=e(74330),r=e(32983),D=e(38476),he=e(34955);function Se(b,v){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function b(v,O){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goods/category/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:v},O||{})));case 1:case"end":return n.stop()}},b)})),X.apply(this,arguments)}function Te(b,v){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function b(v,O){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goods/category/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:v},O||{})));case 1:case"end":return n.stop()}},b)})),k.apply(this,arguments)}function Ae(b,v){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function b(v,O){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goods/category/get/vo",_objectSpread({method:"GET",params:_objectSpread({},v)},O||{})));case 1:case"end":return n.stop()}},b)})),q.apply(this,arguments)}function ve(b,v){return ee.apply(this,arguments)}function ee(){return ee=S()(d()().mark(function b(v,O){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,he.Z)("/api/goods/category/list/page/vo",a()({method:"POST",headers:{"Content-Type":"application/json"},data:v},O||{})));case 1:case"end":return n.stop()}},b)})),ee.apply(this,arguments)}function Be(b,v){return te.apply(this,arguments)}function te(){return te=_asyncToGenerator(_regeneratorRuntime().mark(function b(v,O){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goods/category/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:v},O||{})));case 1:case"end":return n.stop()}},b)})),te.apply(this,arguments)}var t=e(85893),Ce=function(){var v=(0,T.lr)(),O=p()(v,2),U=O[0],n=O[1],be=(0,u.useState)(U.get("query")||""),ae=p()(be,2),w=ae[0],Q=ae[1],je=(0,u.useState)([]),re=p()(je,2),z=re[0],oe=re[1],Ee=(0,u.useState)(!0),ne=p()(Ee,2),$=ne[0],de=ne[1],Pe=(0,u.useState)(function(){return U.get("goods_category_id")||"0"}),ue=p()(Pe,2),R=ue[0],ie=ue[1],De=(0,u.useState)([]),le=p()(De,2),ce=le[0],se=le[1],Ne=(0,u.useState)(!0),me=p()(Ne,2),Me=me[0],_e=me[1],Ge=(0,u.useState)({current:1,pageSize:12,total:0}),ge=p()(Ge,2),V=ge[0],H=ge[1];(0,u.useEffect)(function(){console.log("[GoodsList] Initial activeGoodsCategoryId from state/URL:",R)},[]),(0,u.useEffect)(function(){var s=function(){var E=S()(d()().mark(function N(){var K,P,Z,I,L,J;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("[GoodsList] Fetching goods categories..."),de(!0),m.prev=2,m.next=5,ve({current:1,pageSize:50});case 5:P=m.sent,console.log("[GoodsList] Raw goods categories response:",JSON.stringify(P,null,2)),Z=[],I=(P==null?void 0:P.records)||(P==null||(K=P.data)===null||K===void 0?void 0:K.records),I&&Array.isArray(I)?(console.log("[GoodsList] Records array found, length:",I.length),console.log("[GoodsList] First record example:",I[0]),Z=I.map(function(Y,fe){console.log("[GoodsList] Processing record ".concat(fe,":"),Y),console.log("[GoodsList] cat.gdcategoryId:",Y.gdcategoryId),console.log("[GoodsList] cat.categoryName:",Y.categoryName);var ye={id:String(Y.gdcategoryId),name:Y.categoryName||"\u672A\u77E5\u5206\u7C7B",icon:(0,t.jsx)(A.Z,{className:"w-4 h-4 mr-2 opacity-70"})};return console.log("[GoodsList] Mapped category ".concat(fe,":"),ye),ye}),console.log("[GoodsList] All mapped fetchedCategories:",Z)):console.log("[GoodsList] No records found or records is not an array. Response:",P),L={id:"0",name:"\u5168\u90E8\u5546\u54C1",icon:(0,t.jsx)(A.Z,{className:"w-4 h-4 mr-2 opacity-70"})},J=[L].concat(_()(Z)),console.log("[GoodsList] Final displayGoodsCategories to set:",J),oe(J),console.log("[GoodsList] setDisplayGoodsCategories called with:",J.length,"categories"),m.next=22;break;case 17:m.prev=17,m.t0=m.catch(2),console.error("[GoodsList] \u83B7\u53D6\u5546\u54C1\u5206\u7C7B\u5931\u8D25:",m.t0),o.ZP.error("\u83B7\u53D6\u5546\u54C1\u5206\u7C7B\u5931\u8D25"),oe([{id:"0",name:"\u5168\u90E8\u5546\u54C1",icon:(0,t.jsx)(A.Z,{className:"w-4 h-4 mr-2 opacity-70"})}]);case 22:return m.prev=22,de(!1),console.log("[GoodsList] Goods categories loading finished."),m.finish(22);case 26:case"end":return m.stop()}},N,null,[[2,17,22,26]])}));return function(){return E.apply(this,arguments)}}();s()},[]),(0,u.useEffect)(function(){if(!$&&z.length>0){var s=U.get("goods_category_id");console.log("[GoodsList] URL goods_category_id param:",s),s&&z.find(function(E){return E.id===s})?R!==s&&(console.log("[GoodsList] Setting activeGoodsCategoryId from URL param:",s),ie(s)):!s&&R!=="0"&&(console.log("[GoodsList] No goods_category_id in URL, defaulting activeGoodsCategoryId to '0'."),ie("0"))}},[U,z,$,R]);var Oe=function(){var s=S()(d()().mark(function E(N,K,P,Z){var I,L;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("[GoodsList] Fetching data for category ID: ".concat(N,", query: ").concat(K,", page: ").concat(P)),_e(!0),y.prev=2,I={current:P,pageSize:Z,gdcategoryId:N==="0"?void 0:Number(N),goodsName:K||void 0},y.next=6,(0,D.Ev)(I);case 6:L=y.sent,console.log("[GoodsList] Goods API response:",JSON.stringify(L,null,2)),L&&L.records?(se(L.records),H(function(m){return a()(a()({},m),{},{total:L.total||0,current:P})})):(o.ZP.error((L==null?void 0:L.message)||"\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25\u6216\u5217\u8868\u4E3A\u7A7A"),se([]),H(function(m){return a()(a()({},m),{},{total:0,current:1})})),y.next=17;break;case 11:y.prev=11,y.t0=y.catch(2),console.error("[GoodsList] \u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25:",y.t0),o.ZP.error((y.t0===null||y.t0===void 0?void 0:y.t0.message)||"\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),se([]),H(function(m){return a()(a()({},m),{},{total:0,current:1})});case 17:return y.prev=17,_e(!1),y.finish(17);case 20:case"end":return y.stop()}},E,null,[[2,11,17,20]])}));return function(N,K,P,Z){return s.apply(this,arguments)}}();(0,u.useEffect)(function(){$||(console.log("[GoodsList] Fetching goods based on activeGoodsCategoryId:",R,"searchQuery:",w,"Page:",V.current),Oe(R,w,V.current,V.pageSize))},[R,w,V.current,V.pageSize,$]);var pe=function(E){console.log("[GoodsList] Category changed to:",E),Q(""),H(function(N){return a()(a()({},N),{},{current:1})}),n(E==="0"?{}:{goods_category_id:E})},Le=function(E){Q(E.target.value),H(function(N){return a()(a()({},N),{},{current:1})})};return(0,u.useEffect)(function(){console.log("[GoodsList] displayGoodsCategories state updated:",z)},[z]),(0,t.jsxs)("div",{style:{position:"relative",margin:"-24px -24px 0",width:"calc(100% + 48px)"},children:[(0,t.jsx)("div",{className:"bg-gym-primary text-white py-16 w-full",style:{position:"relative",zIndex:10,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",paddingTop:"8rem",paddingBottom:"4rem",marginTop:"2rem"},children:(0,t.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"\u5546\u54C1\u5C55\u793A"}),(0,t.jsx)("p",{className:"text-white/80 max-w-2xl mx-auto",children:"\u63A2\u7D22\u6211\u4EEC\u4E30\u5BCC\u591A\u6837\u7684\u5065\u8EAB\u5546\u54C1\uFF0C\u4E3A\u60A8\u7684\u5065\u8EAB\u751F\u6D3B\u63D0\u4F9B\u5168\u9762\u652F\u6301"})]})}),(0,t.jsx)(l._z,{header:{title:!1,breadcrumb:{items:[]}},style:{backgroundColor:"transparent",padding:0,marginTop:"-24px"},children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[$?(0,t.jsx)("div",{className:"flex justify-center items-center py-5 mb-6",children:(0,t.jsx)(c.Z,{tip:"\u52A0\u8F7D\u5206\u7C7B\u4E2D..."})}):(0,t.jsx)("div",{className:"flex flex-wrap gap-3 mb-8 justify-center",children:z.map(function(s){return(0,t.jsxs)(f.z,{variant:R===s.id?"default":"outline",className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-full ".concat(R===s.id?"bg-gym-primary hover:bg-gym-primary/90 text-white":"border-gym-gray/40 text-gym-gray hover:border-gym-primary hover:text-gym-primary"),onClick:function(){return pe(s.id)},children:[s.icon,s.name]},s.id)})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8 max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(F.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gym-gray"}),(0,t.jsx)(i.I,{type:"text",placeholder:"\u641C\u7D22\u5546\u54C1\u540D\u79F0...",value:w,onChange:Le,className:"pl-10"})]}),w&&(0,t.jsx)(f.z,{variant:"outline",onClick:function(){return Q("")},className:"shrink-0",children:"\u6E05\u9664"})]}),Me?(0,t.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,t.jsx)(c.Z,{size:"large",tip:"\u52A0\u8F7D\u5546\u54C1\u4E2D..."})}):(0,t.jsx)(t.Fragment,{children:ce.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ce.map(function(s){return(0,t.jsxs)(G.Zb,{className:"overflow-hidden hover-scale flex flex-col",children:[(0,t.jsx)("div",{className:"relative h-60 overflow-hidden bg-gray-100 border flex items-center justify-center",children:s.goodAvatar?(0,t.jsx)("img",{src:s.goodAvatar,alt:s.goodsName||"\u5546\u54C1\u56FE\u7247",className:"w-full h-full object-cover",onError:function(N){N.target.src="/placeholder-image.png"}}):(0,t.jsx)(B.Z,{size:48,className:"text-gray-400"})}),s.inventory!==void 0&&s.inventory<=10&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded-md",children:["\u5E93\u5B58\u7D27\u5F20: ",s.inventory,"\u4EF6"]}),(0,t.jsxs)(G.aY,{className:"pt-6 flex-grow",children:[s.categoryName&&(0,t.jsx)("p",{className:"text-xs text-gym-primary mb-1",children:s.categoryName}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2 truncate",title:s.goodsName||"",children:s.goodsName}),(0,t.jsxs)("p",{className:"text-gym-accent font-bold text-lg mb-1",children:["\xA5",s.sellPrice!==void 0?s.sellPrice.toFixed(2):"N/A"]}),(0,t.jsxs)("p",{className:"text-gym-gray text-sm mb-2",children:["\u5E93\u5B58: ",s.inventory!==void 0?"".concat(s.inventory,"\u4EF6"):"N/A"]}),s.remark&&(0,t.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2",title:s.remark,children:s.remark})]}),(0,t.jsx)(G.eW,{children:(0,t.jsx)(f.z,{variant:"outline",className:"w-full border-gym-primary text-gym-primary hover:bg-gym-primary hover:text-white",asChild:!0,children:(0,t.jsx)(T.rU,{to:"/goods/".concat(s.goodsId),children:"\u67E5\u770B\u8BE6\u60C5"})})})]},s.goodsId)})}):(0,t.jsx)("div",{className:"text-center py-16",children:(0,t.jsxs)(r.Z,{description:!1,image:(0,t.jsx)(B.Z,{className:"w-16 h-16 text-gym-gray mx-auto mb-4"}),children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"\u672A\u627E\u5230\u5546\u54C1"}),(0,t.jsx)("p",{className:"text-gym-gray",children:"\u6CA1\u6709\u627E\u5230\u7B26\u5408\u641C\u7D22\u6761\u4EF6\u7684\u5546\u54C1\uFF0C\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u5173\u952E\u8BCD\u6216\u5206\u7C7B\u3002"}),(w||R!=="0")&&(0,t.jsx)(f.z,{className:"mt-4 bg-gym-primary hover:bg-gym-primary/90",onClick:function(){Q(""),pe("0")},children:"\u6E05\u9664\u6240\u6709\u7B5B\u9009\u6761\u4EF6"})]})})})]})})]})},xe=Ce},28463:function(W,h,e){e.d(h,{Z:function(){return x}});var C=e(91373);const a=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],x=(0,C.Z)("package",a)},87764:function(W,h,e){e.d(h,{Z:function(){return x}});var C=e(91373);const a=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],x=(0,C.Z)("search",a)},24349:function(W,h,e){e.d(h,{Z:function(){return x}});var C=e(91373);const a=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],x=(0,C.Z)("shopping-bag",a)}}]);
