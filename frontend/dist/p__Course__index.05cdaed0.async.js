"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[949],{32497:function(fe,W,t){t.d(W,{E5:function(){return ae},G7:function(){return v},P0:function(){return ne},Tn:function(){return V}});var te=t(15009),d=t.n(te),se=t(97857),A=t.n(se),re=t(99289),m=t.n(re),F=t(34955);function v(n,l){return D.apply(this,arguments)}function D(){return D=m()(d()().mark(function n(l,g){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,F.Z)("/api/course/booking/add",A()({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),D.apply(this,arguments)}function V(n,l){return e.apply(this,arguments)}function e(){return e=m()(d()().mark(function n(l,g){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,F.Z)("/api/course/booking/delete",A()({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),e.apply(this,arguments)}function ae(n,l){return O.apply(this,arguments)}function O(){return O=m()(d()().mark(function n(l,g){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,F.Z)("/api/course/booking/delete/my",A()({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),O.apply(this,arguments)}function w(n,l){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function n(l,g){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/course/booking/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),M.apply(this,arguments)}function G(n,l){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function n(l,g){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/course/booking/list/page/vo/my",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),R.apply(this,arguments)}function ne(n,l){return Z.apply(this,arguments)}function Z(){return Z=m()(d()().mark(function n(l,g){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,F.Z)("/api/course/booking/update",A()({method:"POST",headers:{"Content-Type":"application/json"},data:l},g||{})));case 1:case"end":return s.stop()}},n)})),Z.apply(this,arguments)}},38390:function(fe,W,t){t.r(W),t.d(W,{default:function(){return Se}});var te=t(15009),d=t.n(te),se=t(99289),A=t.n(se),re=t(5574),m=t.n(re),F=t(90930),v=t(67294),D=t(15133),V=t(27080),e=t(85893),ae=function(r){var o=r.categories,f=r.selectedCategory,y=r.onSelectCategory;return(0,e.jsx)("div",{className:"flex flex-wrap gap-2 mb-8",children:o.map(function(j){return(0,e.jsx)(D.Link,{to:"/course/".concat(j.id),style:{textDecoration:"none"},onClick:function(){return y(j.name)},children:(0,e.jsx)("button",{type:"button",className:(0,V.cn)("px-4 py-2 rounded-full text-sm font-medium transition-all w-full h-full",f===j.name?"bg-fitness-red text-white":"bg-gray-100 text-fitness-dark hover:bg-gray-200"),children:j.name})},j.id)})})},O=ae,w=t(87030),M=t(97857),G=t.n(M),R=t(13769),ne=t.n(R),Z=t(12003),n=["className","variant"],l=(0,Z.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g(C){var r=C.className,o=C.variant,f=ne()(C,n);return(0,e.jsx)("div",G()({className:(0,V.cn)(l({variant:o}),r)},f))}var T=function(r){switch(r){case"low":return"bg-green-100 text-green-800 hover:bg-green-200";case"medium":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"high":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},s=function(r){switch(r){case"low":return"\u4F4E\u5F3A\u5EA6";case"medium":return"\u4E2D\u5F3A\u5EA6";case"high":return"\u9AD8\u5F3A\u5EA6";default:return"\u672A\u77E5"}},he=function(r){var o=r.fitnessClass,f=r.trainer,y=o.image;if(y.includes("img.28082003.com")&&!y.includes("!/fw/300")){var j=y.split("?"),N=m()(j,2),I=N[0],E=N[1];y="".concat(I,"!/fw/300").concat(E?"?"+E:"")}return(0,e.jsxs)(w.Zb,{className:"fitness-card h-full flex flex-col overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,e.jsxs)("div",{className:"relative h-48",children:[(0,e.jsx)("img",{src:y,alt:o.title,className:"w-full h-full object-cover"}),(0,e.jsx)("div",{className:"absolute top-2 right-2",children:(0,e.jsx)(g,{className:"".concat(T(o.intensity)," transition-colors"),children:s(o.intensity)})})]}),(0,e.jsxs)(w.aY,{className:"flex flex-col flex-grow p-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,e.jsx)("h3",{className:"text-lg font-bold group-hover:text-fitness-red transition-colors",children:o.title}),(0,e.jsxs)(g,{variant:"outline",className:"border-fitness-red text-fitness-red",children:[o.duration,"\u5206\u949F"]})]}),(0,e.jsx)("p",{className:"text-sm text-fitness-gray mb-4",children:o.category}),(0,e.jsx)("p",{className:"text-sm line-clamp-3 mb-4 flex-grow text-gray-600",children:o.description}),(0,e.jsx)("div",{className:"mt-auto pt-3 border-t border-gray-200",children:(0,e.jsx)("div",{className:"flex justify-between items-center",children:f&&(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("img",{src:f.coachAvatar,alt:f.coachName,className:"w-8 h-8 rounded-full mr-2 border border-gray-200"}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-700",children:f.coachName})]})})})]})]})},ge=he,pe=function(){return(0,e.jsxs)("section",{className:"relative bg-fitness-dark text-white py-16 md:py-24",children:[(0,e.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,e.jsx)("img",{src:"https://img.28082003.com//xlxlimg_1747424870937_0.jpg",alt:"Fitness Hero Background",className:"w-full h-full object-cover opacity-30"})}),(0,e.jsx)("div",{className:"fitness-container relative z-10",children:(0,e.jsxs)("div",{className:"max-w-2xl",children:[(0,e.jsx)("span",{className:"inline-block bg-fitness-red text-white px-3 py-1 text-sm font-medium rounded mb-4",children:"\u5168\u65B0\u8BFE\u7A0B\u4E0A\u7EBF"}),(0,e.jsxs)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:["\u53D1\u73B0 ",(0,e.jsx)("span",{className:"text-fitness-red",children:"\u6700\u4F73"})," \u7684\u5065\u8EAB\u8BFE\u7A0B"]}),(0,e.jsx)("p",{className:"text-lg md:text-xl mb-8 text-gray-200",children:"\u63A2\u7D22\u6700\u4E13\u4E1A\u7684\u5065\u8EAB\u8BFE\u7A0B\uFF0C\u7531\u4E13\u4E1A\u6559\u7EC3\u6307\u5BFC\uFF0C\u8BA9\u4F60\u7684\u5065\u8EAB\u4E4B\u65C5\u66F4\u52A0\u9AD8\u6548\u548C\u6709\u8DA3\u3002"}),(0,e.jsxs)("div",{className:"mt-10 flex flex-col md:flex-row gap-6 md:gap-12",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"10+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u4E13\u4E1A\u8BFE\u7A0B"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"5+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u8D44\u6DF1\u6559\u7EC3"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"100+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u5B66\u5458\u597D\u8BC4"})]})]})]})})]})},xe=pe,K=t(69696),ve=t(32497),le=t(17788),z=["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"],ye=function(r){var o=r.classes,f=r.currentUser,y=(0,v.useState)(null),j=m()(y,2),N=j[0],I=j[1],E=(0,v.useState)(!1),Y=m()(E,2),Q=Y[0],U=Y[1],J=(0,v.useState)(""),X=m()(J,2),q=X[0],ue=X[1],ee=z.reduce(function(u,a){var b=[];return o.forEach(function(S){S.schedule.forEach(function(p){if(p.day===a){var P=p.scheduleId?p.scheduleId.toString():"";b.push(G()(G()({},S),{},{actualScheduleId:P,actualDay:p.day,actualTime:p.time}))}})}),b.sort(function(S,p){return S.actualTime.localeCompare(p.actualTime)}),u[a]=b,u},{}),ie=function(){var u=A()(d()().mark(function a(b,S){var p,P,k;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("[ScheduleSection] handleBooking called with:",{scheduleId:b,courseName:S}),console.log("[ScheduleSection] currentUser:",f),p=f.id,console.log("[ScheduleSection] Attempting to book scheduleId: ".concat(b," for memberId: ").concat(p)),I(b),i.prev=5,P={scheduleId:Number(b),memberId:p},console.log("[ScheduleSection] API call params:",P),i.next=10,(0,ve.G7)(P);case 10:k=i.sent,console.log("[ScheduleSection] API response:",k),k?(ue(S),U(!0)):(console.error("[ScheduleSection] \u9884\u7EA6API\u9519\u8BEF:"),le.Z.error({title:"\u9884\u7EA6\u5931\u8D25",content:"\u64CD\u4F5C\u672A\u6210\u529F\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})),i.next=19;break;case 15:i.prev=15,i.t0=i.catch(5),console.error("[ScheduleSection] Catch block error:",i.t0),le.Z.error({title:"\u9884\u7EA6\u5931\u8D25",content:(i.t0===null||i.t0===void 0?void 0:i.t0.message)||"\u8BF7\u7A0D\u540E\u518D\u8BD5"});case 19:return i.prev=19,I(null),console.log("[ScheduleSection] handleBooking finished."),i.finish(19);case 23:case"end":return i.stop()}},a,null,[[5,15,19,23]])}));return function(b,S){return u.apply(this,arguments)}}();return(0,e.jsx)("section",{id:"schedule",className:"py-12",children:(0,e.jsxs)("div",{className:"fitness-container",children:[(0,e.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"\u8BFE\u7A0B\u65E5\u7A0B\u8868"}),(0,e.jsxs)(K.mQ,{defaultValue:z[0],className:"w-full",children:[(0,e.jsx)(K.dr,{className:"mb-6 w-full flex flex-wrap h-auto bg-transparent justify-start border-b",children:z.map(function(u){return(0,e.jsx)(K.SP,{value:u,className:"data-[state=active]:border-fitness-red data-[state=active]:text-fitness-red border-b-2 border-transparent px-4 py-2 rounded-none",children:u},u)})}),z.map(function(u){return(0,e.jsx)(K.nU,{value:u,className:"mt-0",children:ee[u].length===0?(0,e.jsx)(w.Zb,{className:"bg-gray-50",children:(0,e.jsx)(w.aY,{className:"p-8 text-center",children:(0,e.jsx)("p",{className:"text-fitness-gray",children:"\u8FD9\u4E00\u5929\u6CA1\u6709\u5B89\u6392\u8BFE\u7A0B"})})}):(0,e.jsx)("div",{className:"space-y-4",children:ee[u].map(function(a){return(0,e.jsx)(w.Zb,{className:"overflow-hidden",children:(0,e.jsx)(w.aY,{className:"p-0",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,e.jsx)("div",{className:"sm:w-24 bg-fitness-red text-white p-4 flex items-center justify-center text-center",children:(0,e.jsx)("span",{className:"text-xl font-bold",children:a.actualTime})}),(0,e.jsxs)("div",{className:"flex-grow p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,e.jsxs)("div",{className:"flex-grow",children:[(0,e.jsx)("h4",{className:"font-bold",children:a.title}),(0,e.jsxs)("p",{className:"text-sm text-fitness-gray",children:[a.category," \u2022 ",a.duration,"\u5206\u949F"]})]}),(0,e.jsx)("button",{type:"button",className:"fitness-btn-secondary px-4 py-2",onClick:function(){return ie(a.actualScheduleId,a.title)},disabled:N===a.actualScheduleId,children:N===a.actualScheduleId?"\u9884\u7EA6\u4E2D...":"\u9884\u7EA6"})]})]})})},"".concat(a.id,"-").concat(a.actualScheduleId,"-").concat(u))})})},u)})]}),(0,e.jsx)(le.Z,{title:"\u9884\u7EA6\u6210\u529F",open:Q,onOk:function(){return U(!1)},onCancel:function(){return U(!1)},okText:"\u786E\u5B9A",cancelText:"\u5173\u95ED",children:(0,e.jsxs)("p",{children:['\u8BFE\u7A0B "',q,'" \u9884\u7EA6\u6210\u529F\uFF01']})})]})})},je=ye,H=t(40396),oe=t(2453),be=t(74330),Ce=function(){var r=(0,D.useParams)(),o=(0,D.useModel)("@@initialState"),f=o.initialState,y=f==null?void 0:f.currentUser,j=(0,v.useState)(!0),N=m()(j,2),I=N[0],E=N[1],Y=(0,v.useState)([]),Q=m()(Y,2),U=Q[0],J=Q[1],X=(0,v.useState)([]),q=m()(X,2),ue=q[0],ee=q[1],ie=(0,v.useState)([]),u=m()(ie,2),a=u[0],b=u[1],S=(0,v.useState)("\u5168\u90E8"),p=m()(S,2),P=p[0],k=p[1],ce=function(){var h=A()(d()().mark(function B(_){var $;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,E(!0),c.next=4,(0,H.gS)(_);case 4:$=c.sent,J($),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),console.error("\u83B7\u53D6\u5206\u7C7B\u8BFE\u7A0B\u5931\u8D25:",c.t0),oe.ZP.error("\u83B7\u53D6\u8BFE\u7A0B\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");case 12:return c.prev=12,E(!1),c.finish(12);case 15:case"end":return c.stop()}},B,null,[[0,8,12,15]])}));return function(_){return h.apply(this,arguments)}}();(0,v.useEffect)(function(){var h=function(){var B=A()(d()().mark(function _(){var $,L,c,de,me;return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,E(!0),x.next=4,Promise.all([(0,H.pE)(),(0,H.gS)(),(0,H.im)()]);case 4:$=x.sent,L=m()($,3),c=L[0],de=L[1],me=L[2],b(c),J(de),ee(me),x.next=18;break;case 14:x.prev=14,x.t0=x.catch(0),console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",x.t0),oe.ZP.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");case 18:return x.prev=18,E(!1),x.finish(18);case 21:case"end":return x.stop()}},_,null,[[0,14,18,21]])}));return function(){return B.apply(this,arguments)}}();h()},[]),(0,v.useEffect)(function(){if(r.id){var h=a.find(function(B){return B.id===r.id});h&&(k(h.name),h.name!=="\u5168\u90E8"&&ce(r.id))}else k("\u5168\u90E8")},[r.id,a]);var i=P==="\u5168\u90E8"?U:U.filter(function(h){return h.category===P}),Be=function(B){return ue.find(function(_){return _.coachId===B})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xe,{}),(0,e.jsx)(F._z,{header:{title:!1},style:{backgroundColor:"rgb(249,250,251)"},children:(0,e.jsx)("section",{id:"classes",className:"py-12 bg-gray-50",children:(0,e.jsxs)("div",{className:"fitness-container",children:[(0,e.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-3xl font-bold",children:"\u63A2\u7D22\u6211\u4EEC\u7684\u8BFE\u7A0B"}),(0,e.jsx)("p",{className:"text-fitness-gray mt-2",children:"\u627E\u5230\u6700\u9002\u5408\u4F60\u7684\u5065\u8EAB\u8BFE\u7A0B\uFF0C\u5F00\u59CB\u4F60\u7684\u5065\u5EB7\u4E4B\u65C5"})]}),(0,e.jsx)(O,{categories:a,selectedCategory:P,onSelectCategory:function(B){k(B)}})]}),I?(0,e.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,e.jsx)(be.Z,{size:"large",tip:"\u52A0\u8F7D\u8BFE\u7A0B\u4E2D..."})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(function(h){return(0,e.jsx)(ge,{fitnessClass:h,trainer:Be(h.coachId),currentUser:y},h.id)})}),i.length===0&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("h3",{className:"text-xl font-medium text-fitness-gray",children:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u8BFE\u7A0B"}),(0,e.jsx)("p",{className:"mt-2",children:"\u8BF7\u5C1D\u8BD5\u9009\u62E9\u5176\u4ED6\u7C7B\u522B"})]})]})]})})}),(0,e.jsx)(F._z,{header:{title:!1},style:{backgroundColor:"rgb(241, 241, 241)"},children:(0,e.jsx)(je,{classes:U,currentUser:y})})]})},Se=Ce}}]);
