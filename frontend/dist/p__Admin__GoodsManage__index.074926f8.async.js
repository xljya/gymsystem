"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[834],{31199:function(F,b,e){var I=e(1413),l=e(91),R=e(67294),m=e(21885),T=e(85893),h=["fieldProps","min","proFieldProps","max"],O=function(_,D){var Z=_.fieldProps,y=_.min,f=_.proFieldProps,M=_.max,p=(0,l.Z)(_,h);return(0,T.jsx)(m.Z,(0,I.Z)({valueType:"digit",fieldProps:(0,I.Z)({min:y,max:M},Z),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:f},p))},B=R.forwardRef(O);b.Z=B},5966:function(F,b,e){var I=e(97685),l=e(1413),R=e(91),m=e(21770),T=e(25040),h=e(55241),O=e(98423),B=e(67294),j=e(21885),_=e(85893),D=["fieldProps","proFieldProps"],Z=["fieldProps","proFieldProps"],y="text",f=function(t){var n=t.fieldProps,P=t.proFieldProps,r=(0,R.Z)(t,D);return(0,_.jsx)(j.Z,(0,l.Z)({valueType:y,fieldProps:n,filedConfig:{valueType:y},proFieldProps:P},r))},M=function(t){var n=(0,m.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),P=(0,I.Z)(n,2),r=P[0],c=P[1];return(0,_.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(i){var a,v=i.getFieldValue(t.name||[]);return(0,_.jsx)(h.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(o){return o&&o.parentNode?o.parentNode:o},onOpenChange:function(o){return c(o)},content:(0,_.jsxs)("div",{style:{padding:"4px 0"},children:[(a=t.statusRender)===null||a===void 0?void 0:a.call(t,v),t.strengthText?(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},t.popoverProps),{},{open:r,children:t.children}))}})},p=function(t){var n=t.fieldProps,P=t.proFieldProps,r=(0,R.Z)(t,Z),c=(0,B.useState)(!1),d=(0,I.Z)(c,2),i=d[0],a=d[1];return n!=null&&n.statusRender&&r.name?(0,_.jsx)(M,{name:r.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:i,onOpenChange:a,children:(0,_.jsx)("div",{children:(0,_.jsx)(j.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,O.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(s){var o;n==null||(o=n.onBlur)===null||o===void 0||o.call(n,s),a(!1)},onClick:function(s){var o;n==null||(o=n.onClick)===null||o===void 0||o.call(n,s),a(!0)}}),proFieldProps:P,filedConfig:{valueType:y}},r))})}):(0,_.jsx)(j.Z,(0,l.Z)({valueType:"password",fieldProps:n,proFieldProps:P,filedConfig:{valueType:y}},r))},E=f;E.Password=p,E.displayName="ProFormComponent",b.Z=E},96906:function(F,b,e){e.d(b,{Z:function(){return P}});var I=e(91),l=e(1413),R=e(56874),m=e(87462),T=e(67294),h=e(29245),O=e(32867),B=function(c,d){return T.createElement(O.Z,(0,m.Z)({},c,{ref:d,icon:h.Z}))},j=T.forwardRef(B),_=j,D=e(86413),Z=e(21532),y=e(85418),f=e(83622),M=e(93967),p=e.n(M),E=e(85893),u=["key","name"],t=function(c){var d=c.children,i=c.menus,a=c.onSelect,v=c.className,s=c.style,o=(0,T.useContext)(Z.ZP.ConfigContext),g=o.getPrefixCls,U=g("pro-table-dropdown"),C=(0,D.Q)({onClick:function(x){return a&&a(x.key)},items:i==null?void 0:i.map(function(A){return{label:A.name,key:A.key}})});return(0,E.jsx)(y.Z,(0,l.Z)((0,l.Z)({},C),{},{className:p()(U,v),children:(0,E.jsxs)(f.ZP,{style:s,children:[d," ",(0,E.jsx)(R.Z,{})]})}))},n=function(c){var d=c.className,i=c.style,a=c.onSelect,v=c.menus,s=v===void 0?[]:v,o=c.children,g=(0,T.useContext)(Z.ZP.ConfigContext),U=g.getPrefixCls,C=U("pro-table-dropdown"),A=(0,D.Q)({onClick:function(W){a==null||a(W.key)},items:s.map(function(x){var W=x.key,S=x.name,K=(0,I.Z)(x,u);return(0,l.Z)((0,l.Z)({key:W},K),{},{title:K.title,label:S})})});return(0,E.jsx)(y.Z,(0,l.Z)((0,l.Z)({},A),{},{className:p()(C,d),children:(0,E.jsx)("a",{style:i,children:o||(0,E.jsx)(_,{})})}))};n.Button=t;var P=n},38476:function(F,b,e){e.d(b,{Ev:function(){return f},Gs:function(){return B},IG:function(){return p},ag:function(){return _},u0:function(){return Z}});var I=e(15009),l=e.n(I),R=e(97857),m=e.n(R),T=e(99289),h=e.n(T),O=e(34955);function B(u,t){return j.apply(this,arguments)}function j(){return j=h()(l()().mark(function u(t,n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.Z)("/api/goods/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:t},n||{})));case 1:case"end":return r.stop()}},u)})),j.apply(this,arguments)}function _(u,t){return D.apply(this,arguments)}function D(){return D=h()(l()().mark(function u(t,n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.Z)("/api/goods/delete",m()({method:"POST",headers:{"Content-Type":"application/json"},data:t},n||{})));case 1:case"end":return r.stop()}},u)})),D.apply(this,arguments)}function Z(u,t){return y.apply(this,arguments)}function y(){return y=h()(l()().mark(function u(t,n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.Z)("/api/goods/get/vo",m()({method:"GET",params:m()({},t)},n||{})));case 1:case"end":return r.stop()}},u)})),y.apply(this,arguments)}function f(u,t){return M.apply(this,arguments)}function M(){return M=h()(l()().mark(function u(t,n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.Z)("/api/goods/list/page/vo",m()({method:"POST",headers:{"Content-Type":"application/json"},data:t},n||{})));case 1:case"end":return r.stop()}},u)})),M.apply(this,arguments)}function p(u,t){return E.apply(this,arguments)}function E(){return E=h()(l()().mark(function u(t,n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,O.Z)("/api/goods/update",m()({method:"POST",headers:{"Content-Type":"application/json"},data:t},n||{})));case 1:case"end":return r.stop()}},u)})),E.apply(this,arguments)}},91087:function(F,b,e){e.r(b);var I=e(5574),l=e.n(I),R=e(15009),m=e.n(R),T=e(99289),h=e.n(T),O=e(96906),B=e(51930),j=e(37476),_=e(5966),D=e(31199),Z=e(67294),y=e(95715),f=e(2453),M=e(38476),p=e(85893),E=[{dataIndex:"goodsId",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(t,n,P){return P+1}},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"goodsName",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}},{title:"\u5355\u4F4D",dataIndex:"unit",hideInSearch:!1,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}},{title:"\u552E\u4EF7",dataIndex:"sellPrice",valueType:"money",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"},{type:"number",min:0,message:"\u552E\u4EF7\u4E0D\u80FD\u5C0F\u4E8E0"}]}},{title:"\u5E93\u5B58",dataIndex:"inventory",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"},{pattern:/^[1-9]\d*$/,message:"\u8BF7\u8F93\u5165\u5927\u4E8E0\u7684\u6574\u6570"}]}},{title:"\u56FE\u7247",dataIndex:"goodAvatar",render:function(t,n){return(0,p.jsx)(y.Z,{src:n.goodAvatar||"https://cdn.jsdelivr.net/gh/xljya/image/post/xlimg_1749058911861_0.png",width:100,height:100,style:{objectFit:"cover",borderRadius:"4px"}})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(t,n,P,r){return[(0,p.jsx)("a",{onClick:function(){if(n.goodsId){var d;r==null||(d=r.startEditable)===null||d===void 0||d.call(r,n.goodsId)}},children:"\u7F16\u8F91"},"editable"),(0,p.jsx)(O.Z,{onSelect:function(){var c=h()(m()().mark(function d(i){var a;return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(i==="delete"&&n.goodsId)){s.next=13;break}return s.prev=1,s.next=4,(0,M.ag)({goodsId:n.goodsId});case 4:a=s.sent,console.log("\u5220\u9664\u5546\u54C1\u54CD\u5E94:",a),a?(f.ZP.success("\u5220\u9664\u6210\u529F"),r==null||r.reload()):f.ZP.error("\u5220\u9664\u5931\u8D25"),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(1),console.error("\u5220\u9664\u5546\u54C1\u5931\u8D25:",s.t0),f.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return s.stop()}},d,null,[[1,9]])}));return function(d){return c.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];b.default=function(){var u=(0,Z.useRef)(),t=(0,Z.useState)(!1),n=l()(t,2),P=n[0],r=n[1],c=function(){var d=h()(m()().mark(function i(a){var v,s;return m()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,(0,M.Gs)(a);case 3:v=g.sent,console.log("\u6DFB\u52A0\u5546\u54C1\u54CD\u5E94:",v),v?(f.ZP.success("\u6DFB\u52A0\u6210\u529F"),r(!1),(s=u.current)===null||s===void 0||s.reload()):f.ZP.error("\u6DFB\u52A0\u5931\u8D25"),g.next=12;break;case 8:g.prev=8,g.t0=g.catch(0),console.error("\u6DFB\u52A0\u5546\u54C1\u5931\u8D25:",g.t0),f.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return g.stop()}},i,null,[[0,8]])}));return function(a){return d.apply(this,arguments)}}();return(0,p.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,p.jsx)(B.Z,{columns:E,actionRef:u,cardBordered:!0,toolBarRender:function(){return[(0,p.jsx)("a",{onClick:function(){r(!0)},children:"\u65B0\u589E\u5546\u54C1"},"add")]},request:function(){var d=h()(m()().mark(function i(a){var v;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",a),o.prev=1,o.next=4,(0,M.Ev)({current:a.current,pageSize:a.pageSize,goodsName:a.goodsName,unit:a.unit});case 4:return v=o.sent,console.log("\u54CD\u5E94\u6570\u636E:",v),o.abrupt("return",{data:v.records||[],success:!0,total:Number(v.total)||0});case 9:return o.prev=9,o.t0=o.catch(1),console.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25:",o.t0),f.ZP.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25"),o.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return o.stop()}},i,null,[[1,9]])}));return function(i){return d.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var d=h()(m()().mark(function a(v,s){var o,g;return m()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,C.next=3,(0,M.IG)({goodsId:s.goodsId,goodsName:s.goodsName,unit:s.unit,sellPrice:s.sellPrice,inventory:s.inventory,goodAvatar:s.goodAvatar});case 3:o=C.sent,console.log("\u66F4\u65B0\u5546\u54C1\u54CD\u5E94:",o),o?(f.ZP.success("\u66F4\u65B0\u6210\u529F"),(g=u.current)===null||g===void 0||g.reload()):f.ZP.error("\u66F4\u65B0\u5931\u8D25"),C.next=12;break;case 8:C.prev=8,C.t0=C.catch(0),console.error("\u66F4\u65B0\u5546\u54C1\u5931\u8D25:",C.t0),f.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return C.stop()}},a,null,[[0,8]])}));function i(a,v){return d.apply(this,arguments)}return i}()},columnsState:{persistenceKey:"goods-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"goodsId",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(i){return console.log(i)}},dateFormatter:"string",headerTitle:""}),(0,p.jsxs)(j.Y,{title:"\u65B0\u589E\u5546\u54C1",width:"400px",open:P,onOpenChange:r,onFinish:function(){var d=h()(m()().mark(function i(a){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c(a);case 2:case"end":return s.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),children:[(0,p.jsx)(_.Z,{name:"goodsName",label:"\u5546\u54C1\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}),(0,p.jsx)(_.Z,{name:"unit",label:"\u5355\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}),(0,p.jsx)(D.Z,{name:"unitPrice",label:"\u5355\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"}]}),(0,p.jsx)(D.Z,{name:"sellPrice",label:"\u552E\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"}]}),(0,p.jsx)(D.Z,{name:"inventory",label:"\u5E93\u5B58",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"}]}),(0,p.jsx)(_.Z,{name:"goodAvatar",label:"\u56FE\u7247\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u94FE\u63A5"})]})]})}}}]);
