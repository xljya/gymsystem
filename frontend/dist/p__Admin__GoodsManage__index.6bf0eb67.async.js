"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[834],{31199:function(Z,h,r){var E=r(1413),O=r(91),b=r(67294),o=r(21885),C=r(85893),g=["fieldProps","min","proFieldProps","max"],M=function(p,P){var y=p.fieldProps,i=p.min,f=p.proFieldProps,u=p.max,j=(0,O.Z)(p,g);return(0,C.jsx)(o.Z,(0,E.Z)({valueType:"digit",fieldProps:(0,E.Z)({min:i,max:u},y),ref:P,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:f},j))},T=b.forwardRef(M);h.Z=T},91087:function(Z,h,r){r.r(h);var E=r(5574),O=r.n(E),b=r(15009),o=r.n(b),C=r(99289),g=r.n(C),M=r(96906),T=r(51930),B=r(37476),p=r(5966),P=r(31199),y=r(67294),i=r(2453),f=r(34955),u=r(85893),j=[{dataIndex:"goodsId",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(R,c,I){return I+1}},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"goodsName",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}},{title:"\u5355\u4F4D",dataIndex:"unit",hideInSearch:!1,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}},{title:"\u552E\u4EF7",dataIndex:"sellPrice",valueType:"money",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"},{type:"number",min:0,message:"\u552E\u4EF7\u4E0D\u80FD\u5C0F\u4E8E0"}]}},{title:"\u5E93\u5B58",dataIndex:"inventory",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"},{pattern:/^[1-9]\d*$/,message:"\u8BF7\u8F93\u5165\u5927\u4E8E0\u7684\u6574\u6570"}]}},{title:"\u5907\u6CE8",dataIndex:"remark",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(R,c,I,_){return[(0,u.jsx)("a",{onClick:function(){if(c.goodsId){var a;_==null||(a=_.startEditable)===null||a===void 0||a.call(_,c.goodsId)}},children:"\u7F16\u8F91"},"editable"),(0,u.jsx)(M.Z,{onSelect:function(){var D=g()(o()().mark(function a(t){var s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t==="delete"&&c.goodsId)){e.next=13;break}return e.prev=1,e.next=4,(0,f.Z)("/api/goods/delete",{method:"POST",data:{goodsId:c.goodsId}});case 4:s=e.sent,console.log("\u5220\u9664\u5546\u54C1\u54CD\u5E94:",s),s?(i.ZP.success("\u5220\u9664\u6210\u529F"),_==null||_.reload()):i.ZP.error("\u5220\u9664\u5931\u8D25"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("\u5220\u9664\u5546\u54C1\u5931\u8D25:",e.t0),i.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return e.stop()}},a,null,[[1,9]])}));return function(a){return D.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];h.default=function(){var v=(0,y.useRef)(),R=(0,y.useState)(!1),c=O()(R,2),I=c[0],_=c[1],D=function(){var a=g()(o()().mark(function t(s){var d,e;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,f.Z)("/api/goods/add",{method:"POST",data:s});case 3:d=l.sent,console.log("\u6DFB\u52A0\u5546\u54C1\u54CD\u5E94:",d),d?(i.ZP.success("\u6DFB\u52A0\u6210\u529F"),_(!1),(e=v.current)===null||e===void 0||e.reload()):i.ZP.error("\u6DFB\u52A0\u5931\u8D25"),l.next=12;break;case 8:l.prev=8,l.t0=l.catch(0),console.error("\u6DFB\u52A0\u5546\u54C1\u5931\u8D25:",l.t0),i.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return l.stop()}},t,null,[[0,8]])}));return function(s){return a.apply(this,arguments)}}();return(0,u.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,u.jsx)(T.Z,{columns:j,actionRef:v,cardBordered:!0,toolBarRender:function(){return[(0,u.jsx)("a",{onClick:function(){_(!0)},children:"\u65B0\u589E\u5546\u54C1"},"add")]},request:function(){var a=g()(o()().mark(function t(s){var d;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",s),n.prev=1,n.next=4,(0,f.Z)("/api/goods/list/page/vo",{method:"POST",data:{current:s.current,pageSize:s.pageSize,goodsName:s.goodsName,unit:s.unit}});case 4:return d=n.sent,console.log("\u54CD\u5E94\u6570\u636E:",d),n.abrupt("return",{data:d.records||[],success:!0,total:Number(d.total)||0});case 9:return n.prev=9,n.t0=n.catch(1),console.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25:",n.t0),i.ZP.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25"),n.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return n.stop()}},t,null,[[1,9]])}));return function(t){return a.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var a=g()(o()().mark(function s(d,e){var n,l;return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,f.Z)("/api/goods/update",{method:"POST",data:{goodsId:e.goodsId,goodsName:e.goodsName,unit:e.unit,sellPrice:e.sellPrice,inventory:e.inventory,remark:e.remark}});case 3:n=m.sent,console.log("\u66F4\u65B0\u5546\u54C1\u54CD\u5E94:",n),n?(i.ZP.success("\u66F4\u65B0\u6210\u529F"),(l=v.current)===null||l===void 0||l.reload()):i.ZP.error("\u66F4\u65B0\u5931\u8D25"),m.next=12;break;case 8:m.prev=8,m.t0=m.catch(0),console.error("\u66F4\u65B0\u5546\u54C1\u5931\u8D25:",m.t0),i.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return m.stop()}},s,null,[[0,8]])}));function t(s,d){return a.apply(this,arguments)}return t}()},columnsState:{persistenceKey:"goods-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"goodsId",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(t){return console.log(t)}},dateFormatter:"string",headerTitle:""}),(0,u.jsxs)(B.Y,{title:"\u65B0\u589E\u5546\u54C1",width:"400px",open:I,onOpenChange:_,onFinish:function(){var a=g()(o()().mark(function t(s){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(s);case 2:case"end":return e.stop()}},t)}));return function(t){return a.apply(this,arguments)}}(),children:[(0,u.jsx)(p.Z,{name:"goodsName",label:"\u5546\u54C1\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}),(0,u.jsx)(p.Z,{name:"unit",label:"\u5355\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}),(0,u.jsx)(P.Z,{name:"unitPrice",label:"\u5355\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"}]}),(0,u.jsx)(P.Z,{name:"sellPrice",label:"\u552E\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"}]}),(0,u.jsx)(P.Z,{name:"inventory",label:"\u5E93\u5B58",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"}]}),(0,u.jsx)(p.Z,{name:"remark",label:"\u5907\u6CE8"})]})]})}}}]);
