"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[454],{45884:function(z,Z,u){u.r(Z),u.d(Z,{default:function(){return M}});var R=u(97857),y=u.n(R),U=u(15009),l=u.n(U),B=u(99289),v=u.n(B),G=u(5574),x=u.n(G),T=u(34955);function $(n,t){return q.apply(this,arguments)}function q(){return q=v()(l()().mark(function n(t,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.Z)("/api/equipment/add",y()({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return e.stop()}},n)})),q.apply(this,arguments)}function F(n,t){return S.apply(this,arguments)}function S(){return S=v()(l()().mark(function n(t,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.Z)("/api/equipment/delete",y()({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return e.stop()}},n)})),S.apply(this,arguments)}function D(n,t){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/equipment/get",_objectSpread({method:"GET",params:_objectSpread({},t)},a||{})));case 1:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function H(n,t){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/equipment/get/vo",_objectSpread({method:"GET",params:_objectSpread({},t)},a||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function K(n,t){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/equipment/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return e.stop()}},n)})),j.apply(this,arguments)}function N(n,t){return w.apply(this,arguments)}function w(){return w=v()(l()().mark(function n(t,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.Z)("/api/equipment/update",y()({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return e.stop()}},n)})),w.apply(this,arguments)}var V=u(96906),O=u(51930),k=u(37476),E=u(5966),h=u(2453),b=u(67294),g=u(85893),A=[{dataIndex:"eqId",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(t,a,m){return m+1}},{title:"\u5668\u6750\u540D\u79F0",dataIndex:"eqName",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5668\u6750\u63CF\u8FF0",dataIndex:"eqText",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(t,a,m,e){return[(0,g.jsx)("a",{onClick:function(){if(a.eqId){var s;e==null||(s=e.startEditable)===null||s===void 0||s.call(e,a.eqId)}},children:"\u7F16\u8F91"},"editable"),(0,g.jsx)(V.Z,{onSelect:function(s){s==="delete"&&a.eqId&&F({eqId:Number(a.eqId)}).then(function(r){console.log("\u5220\u9664\u54CD\u5E94:",r),r?(h.ZP.success("\u5220\u9664\u6210\u529F"),e==null||e.reload()):h.ZP.error("\u5220\u9664\u5931\u8D25")}).catch(function(r){console.error("\u5220\u9664\u9519\u8BEF:",r),h.ZP.error("\u5220\u9664\u5931\u8D25")})},menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}],M=function(){var n=(0,b.useRef)(),t=(0,b.useState)(!1),a=x()(t,2),m=a[0],e=a[1],C=function(){var s=v()(l()().mark(function r(o){var f,p;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$(o);case 3:f=i.sent,f?(h.ZP.success("\u6DFB\u52A0\u6210\u529F"),e(!1),(p=n.current)===null||p===void 0||p.reload()):h.ZP.error("\u6DFB\u52A0\u5931\u8D25"),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),console.error("\u6DFB\u52A0\u9519\u8BEF:",i.t0),h.ZP.error("\u6DFB\u52A0\u5931\u8D25");case 11:case"end":return i.stop()}},r,null,[[0,7]])}));return function(o){return s.apply(this,arguments)}}();return(0,g.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,g.jsx)(O.Z,{columns:A,actionRef:n,cardBordered:!0,toolBarRender:function(){return[(0,g.jsx)("a",{onClick:function(){e(!0)},children:"\u65B0\u589E\u5668\u6750"},"add")]},request:function(){var s=v()(l()().mark(function r(o){var f;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",o),d.next=3,(0,T.Z)("/api/equipment/list/page/vo",{method:"POST",data:{current:o.current,pageSize:o.pageSize,eqName:o.eqName}});case 3:return f=d.sent,console.log("\u54CD\u5E94\u6570\u636E:",f),d.abrupt("return",{data:f.records||[],success:!0,total:Number(f.total)||0});case 6:case"end":return d.stop()}},r)}));return function(r){return s.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var s=v()(l()().mark(function o(f,p){var d,i;return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,N({eqId:p.eqId,eqName:p.eqName,eqText:p.eqText});case 3:d=c.sent,console.log("\u66F4\u65B0\u54CD\u5E94:",d),d?(h.ZP.success("\u66F4\u65B0\u6210\u529F"),(i=n.current)===null||i===void 0||i.reload()):h.ZP.error("\u66F4\u65B0\u5931\u8D25"),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),console.error("\u66F4\u65B0\u9519\u8BEF:",c.t0),h.ZP.error("\u66F4\u65B0\u5931\u8D25");case 12:case"end":return c.stop()}},o,null,[[0,8]])}));function r(o,f){return s.apply(this,arguments)}return r}()},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(r){console.log("value: ",r)}},rowKey:"eqId",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:function(r,o){return o==="get"?y()(y()({},r),{},{created_at:[r.startTime,r.endTime]}):r}},pagination:{pageSize:5,onChange:function(r){return console.log(r)}},dateFormatter:"string",headerTitle:""}),(0,g.jsxs)(k.Y,{title:"\u65B0\u589E\u5668\u6750",width:"400px",open:m,onOpenChange:e,onFinish:function(){var s=v()(l()().mark(function r(o){return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,C(o);case 2:case"end":return p.stop()}},r)}));return function(r){return s.apply(this,arguments)}}(),children:[(0,g.jsx)(E.Z,{name:"eqName",label:"\u5668\u6750\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5668\u6750\u540D\u79F0"}]}),(0,g.jsx)(E.Z,{name:"eqText",label:"\u5668\u6750\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5668\u6750\u63CF\u8FF0"}]})]})]})}}}]);
