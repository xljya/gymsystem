"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[834],{31199:function(W,T,e){var O=e(1413),v=e(91),M=e(67294),P=e(21885),E=e(85893),h=["fieldProps","min","proFieldProps","max"],x=function(i,C){var D=i.fieldProps,p=i.min,y=i.proFieldProps,_=i.max,I=(0,v.Z)(i,h);return(0,E.jsx)(P.Z,(0,O.Z)({valueType:"digit",fieldProps:(0,O.Z)({min:p,max:_},D),ref:C,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:y},I))},R=M.forwardRef(x);T.Z=R},5966:function(W,T,e){var O=e(97685),v=e(1413),M=e(91),P=e(21770),E=e(25040),h=e(55241),x=e(98423),R=e(67294),Z=e(21885),i=e(85893),C=["fieldProps","proFieldProps"],D=["fieldProps","proFieldProps"],p="text",y=function(a){var n=a.fieldProps,m=a.proFieldProps,f=(0,M.Z)(a,C);return(0,i.jsx)(Z.Z,(0,v.Z)({valueType:p,fieldProps:n,filedConfig:{valueType:p},proFieldProps:m},f))},_=function(a){var n=(0,P.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),m=(0,O.Z)(n,2),f=m[0],s=m[1];return(0,i.jsx)(E.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(l){var o,r=l.getFieldValue(a.name||[]);return(0,i.jsx)(h.Z,(0,v.Z)((0,v.Z)({getPopupContainer:function(t){return t&&t.parentNode?t.parentNode:t},onOpenChange:function(t){return s(t)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(o=a.statusRender)===null||o===void 0?void 0:o.call(a,r),a.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:f,children:a.children}))}})},I=function(a){var n=a.fieldProps,m=a.proFieldProps,f=(0,M.Z)(a,D),s=(0,R.useState)(!1),d=(0,O.Z)(s,2),l=d[0],o=d[1];return n!=null&&n.statusRender&&f.name?(0,i.jsx)(_,{name:f.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:l,onOpenChange:o,children:(0,i.jsx)("div",{children:(0,i.jsx)(Z.Z,(0,v.Z)({valueType:"password",fieldProps:(0,v.Z)((0,v.Z)({},(0,x.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(u){var t;n==null||(t=n.onBlur)===null||t===void 0||t.call(n,u),o(!1)},onClick:function(u){var t;n==null||(t=n.onClick)===null||t===void 0||t.call(n,u),o(!0)}}),proFieldProps:m,filedConfig:{valueType:p}},f))})}):(0,i.jsx)(Z.Z,(0,v.Z)({valueType:"password",fieldProps:n,proFieldProps:m,filedConfig:{valueType:p}},f))},c=y;c.Password=I,c.displayName="ProFormComponent",T.Z=c},96906:function(W,T,e){e.d(T,{Z:function(){return m}});var O=e(91),v=e(1413),M=e(56874),P=e(87462),E=e(67294),h=e(29245),x=e(32867),R=function(s,d){return E.createElement(x.Z,(0,P.Z)({},s,{ref:d,icon:h.Z}))},Z=E.forwardRef(R),i=Z,C=e(86413),D=e(21532),p=e(85418),y=e(83622),_=e(93967),I=e.n(_),c=e(85893),j=["key","name"],a=function(s){var d=s.children,l=s.menus,o=s.onSelect,r=s.className,u=s.style,t=(0,E.useContext)(D.ZP.ConfigContext),S=t.getPrefixCls,g=S("pro-table-dropdown"),A=(0,C.Q)({onClick:function(B){return o&&o(B.key)},items:l==null?void 0:l.map(function(b){return{label:b.name,key:b.key}})});return(0,c.jsx)(p.Z,(0,v.Z)((0,v.Z)({},A),{},{className:I()(g,r),children:(0,c.jsxs)(y.ZP,{style:u,children:[d," ",(0,c.jsx)(M.Z,{})]})}))},n=function(s){var d=s.className,l=s.style,o=s.onSelect,r=s.menus,u=r===void 0?[]:r,t=s.children,S=(0,E.useContext)(D.ZP.ConfigContext),g=S.getPrefixCls,A=g("pro-table-dropdown"),b=(0,C.Q)({onClick:function(F){o==null||o(F.key)},items:u.map(function(B){var F=B.key,U=B.name,K=(0,O.Z)(B,j);return(0,v.Z)((0,v.Z)({key:F},K),{},{title:K.title,label:U})})});return(0,c.jsx)(p.Z,(0,v.Z)((0,v.Z)({},b),{},{className:I()(A,d),children:(0,c.jsx)("a",{style:l,children:t||(0,c.jsx)(i,{})})}))};n.Button=a;var m=n},91087:function(W,T,e){e.r(T);var O=e(5574),v=e.n(O),M=e(15009),P=e.n(M),E=e(99289),h=e.n(E),x=e(96906),R=e(51930),Z=e(37476),i=e(5966),C=e(31199),D=e(67294),p=e(2453),y=e(34955),_=e(85893),I=[{dataIndex:"goodsId",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(j,a,n){return n+1}},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"goodsName",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}},{title:"\u5355\u4F4D",dataIndex:"unit",hideInSearch:!1,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}},{title:"\u552E\u4EF7",dataIndex:"sellPrice",valueType:"money",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"},{type:"number",min:0,message:"\u552E\u4EF7\u4E0D\u80FD\u5C0F\u4E8E0"}]}},{title:"\u5E93\u5B58",dataIndex:"inventory",hideInSearch:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"},{pattern:/^[1-9]\d*$/,message:"\u8BF7\u8F93\u5165\u5927\u4E8E0\u7684\u6574\u6570"}]}},{title:"\u5907\u6CE8",dataIndex:"remark",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(j,a,n,m){return[(0,_.jsx)("a",{onClick:function(){if(a.goodsId){var s;m==null||(s=m.startEditable)===null||s===void 0||s.call(m,a.goodsId)}},children:"\u7F16\u8F91"},"editable"),(0,_.jsx)(x.Z,{onSelect:function(){var f=h()(P()().mark(function s(d){var l;return P()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(d==="delete"&&a.goodsId)){r.next=13;break}return r.prev=1,r.next=4,(0,y.Z)("/api/goods/delete",{method:"POST",data:{goodsId:a.goodsId}});case 4:l=r.sent,console.log("\u5220\u9664\u5546\u54C1\u54CD\u5E94:",l),l?(p.ZP.success("\u5220\u9664\u6210\u529F"),m==null||m.reload()):p.ZP.error("\u5220\u9664\u5931\u8D25"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.error("\u5220\u9664\u5546\u54C1\u5931\u8D25:",r.t0),p.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return r.stop()}},s,null,[[1,9]])}));return function(s){return f.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];T.default=function(){var c=(0,D.useRef)(),j=(0,D.useState)(!1),a=v()(j,2),n=a[0],m=a[1],f=function(){var s=h()(P()().mark(function d(l){var o,r;return P()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,y.Z)("/api/goods/add",{method:"POST",data:l});case 3:o=t.sent,console.log("\u6DFB\u52A0\u5546\u54C1\u54CD\u5E94:",o),o?(p.ZP.success("\u6DFB\u52A0\u6210\u529F"),m(!1),(r=c.current)===null||r===void 0||r.reload()):p.ZP.error("\u6DFB\u52A0\u5931\u8D25"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("\u6DFB\u52A0\u5546\u54C1\u5931\u8D25:",t.t0),p.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return t.stop()}},d,null,[[0,8]])}));return function(l){return s.apply(this,arguments)}}();return(0,_.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,_.jsx)(R.Z,{columns:I,actionRef:c,cardBordered:!0,toolBarRender:function(){return[(0,_.jsx)("a",{onClick:function(){m(!0)},children:"\u65B0\u589E\u5546\u54C1"},"add")]},request:function(){var s=h()(P()().mark(function d(l){var o;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",l),u.prev=1,u.next=4,(0,y.Z)("/api/goods/list/page/vo",{method:"POST",data:{current:l.current,pageSize:l.pageSize,goodsName:l.goodsName,unit:l.unit}});case 4:return o=u.sent,console.log("\u54CD\u5E94\u6570\u636E:",o),u.abrupt("return",{data:o.records||[],success:!0,total:Number(o.total)||0});case 9:return u.prev=9,u.t0=u.catch(1),console.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25:",u.t0),p.ZP.error("\u83B7\u53D6\u5546\u54C1\u5217\u8868\u5931\u8D25"),u.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return u.stop()}},d,null,[[1,9]])}));return function(d){return s.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var s=h()(P()().mark(function l(o,r){var u,t;return P()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,(0,y.Z)("/api/goods/update",{method:"POST",data:{goodsId:r.goodsId,goodsName:r.goodsName,unit:r.unit,sellPrice:r.sellPrice,inventory:r.inventory,remark:r.remark}});case 3:u=g.sent,console.log("\u66F4\u65B0\u5546\u54C1\u54CD\u5E94:",u),u?(p.ZP.success("\u66F4\u65B0\u6210\u529F"),(t=c.current)===null||t===void 0||t.reload()):p.ZP.error("\u66F4\u65B0\u5931\u8D25"),g.next=12;break;case 8:g.prev=8,g.t0=g.catch(0),console.error("\u66F4\u65B0\u5546\u54C1\u5931\u8D25:",g.t0),p.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return g.stop()}},l,null,[[0,8]])}));function d(l,o){return s.apply(this,arguments)}return d}()},columnsState:{persistenceKey:"goods-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"goodsId",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(d){return console.log(d)}},dateFormatter:"string",headerTitle:""}),(0,_.jsxs)(Z.Y,{title:"\u65B0\u589E\u5546\u54C1",width:"400px",open:n,onOpenChange:m,onFinish:function(){var s=h()(P()().mark(function d(l){return P()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(l);case 2:case"end":return r.stop()}},d)}));return function(d){return s.apply(this,arguments)}}(),children:[(0,_.jsx)(i.Z,{name:"goodsName",label:"\u5546\u54C1\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"}]}),(0,_.jsx)(i.Z,{name:"unit",label:"\u5355\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D"}]}),(0,_.jsx)(C.Z,{name:"unitPrice",label:"\u5355\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"}]}),(0,_.jsx)(C.Z,{name:"sellPrice",label:"\u552E\u4EF7",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u552E\u4EF7"}]}),(0,_.jsx)(C.Z,{name:"inventory",label:"\u5E93\u5B58",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u5B58"}]}),(0,_.jsx)(i.Z,{name:"remark",label:"\u5907\u6CE8"})]})]})}}}]);
