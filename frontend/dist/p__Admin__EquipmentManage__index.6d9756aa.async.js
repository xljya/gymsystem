"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[454],{5966:function(z,N,e){var w=e(97685),i=e(1413),A=e(91),v=e(21770),M=e(25040),E=e(55241),$=e(98423),b=e(67294),B=e(21885),g=e(85893),U=["fieldProps","proFieldProps"],W=["fieldProps","proFieldProps"],S="text",q=function(o){var r=o.fieldProps,T=o.proFieldProps,C=(0,A.Z)(o,U);return(0,g.jsx)(B.Z,(0,i.Z)({valueType:S,fieldProps:r,filedConfig:{valueType:S},proFieldProps:T},C))},F=function(o){var r=(0,v.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),T=(0,w.Z)(r,2),C=T[0],c=T[1];return(0,g.jsx)(M.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Z){var u,O=Z.getFieldValue(o.name||[]);return(0,g.jsx)(E.Z,(0,i.Z)((0,i.Z)({getPopupContainer:function(d){return d&&d.parentNode?d.parentNode:d},onOpenChange:function(d){return c(d)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(u=o.statusRender)===null||u===void 0?void 0:u.call(o,O),o.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:C,children:o.children}))}})},G=function(o){var r=o.fieldProps,T=o.proFieldProps,C=(0,A.Z)(o,W),c=(0,b.useState)(!1),j=(0,w.Z)(c,2),Z=j[0],u=j[1];return r!=null&&r.statusRender&&C.name?(0,g.jsx)(F,{name:C.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:Z,onOpenChange:u,children:(0,g.jsx)("div",{children:(0,g.jsx)(B.Z,(0,i.Z)({valueType:"password",fieldProps:(0,i.Z)((0,i.Z)({},(0,$.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(m){var d;r==null||(d=r.onBlur)===null||d===void 0||d.call(r,m),u(!1)},onClick:function(m){var d;r==null||(d=r.onClick)===null||d===void 0||d.call(r,m),u(!0)}}),proFieldProps:T,filedConfig:{valueType:S}},C))})}):(0,g.jsx)(B.Z,(0,i.Z)({valueType:"password",fieldProps:r,proFieldProps:T,filedConfig:{valueType:S}},C))},P=q;P.Password=G,P.displayName="ProFormComponent",N.Z=P},96906:function(z,N,e){e.d(N,{Z:function(){return T}});var w=e(91),i=e(1413),A=e(56874),v=e(87462),M=e(67294),E=e(29245),$=e(32867),b=function(c,j){return M.createElement($.Z,(0,v.Z)({},c,{ref:j,icon:E.Z}))},B=M.forwardRef(b),g=B,U=e(86413),W=e(21532),S=e(85418),q=e(83622),F=e(93967),G=e.n(F),P=e(85893),K=["key","name"],o=function(c){var j=c.children,Z=c.menus,u=c.onSelect,O=c.className,m=c.style,d=(0,M.useContext)(W.ZP.ConfigContext),L=d.getPrefixCls,t=L("pro-table-dropdown"),s=(0,U.Q)({onClick:function(f){return u&&u(f.key)},items:Z==null?void 0:Z.map(function(a){return{label:a.name,key:a.key}})});return(0,P.jsx)(S.Z,(0,i.Z)((0,i.Z)({},s),{},{className:G()(t,O),children:(0,P.jsxs)(q.ZP,{style:m,children:[j," ",(0,P.jsx)(A.Z,{})]})}))},r=function(c){var j=c.className,Z=c.style,u=c.onSelect,O=c.menus,m=O===void 0?[]:O,d=c.children,L=(0,M.useContext)(W.ZP.ConfigContext),t=L.getPrefixCls,s=t("pro-table-dropdown"),a=(0,U.Q)({onClick:function(n){u==null||u(n.key)},items:m.map(function(f){var n=f.key,V=f.name,p=(0,w.Z)(f,K);return(0,i.Z)((0,i.Z)({key:n},p),{},{title:p.title,label:V})})});return(0,P.jsx)(S.Z,(0,i.Z)((0,i.Z)({},a),{},{className:G()(s,j),children:(0,P.jsx)("a",{style:Z,children:d||(0,P.jsx)(g,{})})}))};r.Button=o;var T=r},45884:function(z,N,e){e.r(N),e.d(N,{default:function(){return L}});var w=e(97857),i=e.n(w),A=e(15009),v=e.n(A),M=e(99289),E=e.n(M),$=e(5574),b=e.n($),B=e(34955);function g(t,s){return U.apply(this,arguments)}function U(){return U=E()(v()().mark(function t(s,a){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,B.Z)("/api/equipment/add",i()({method:"POST",headers:{"Content-Type":"application/json"},data:s},a||{})));case 1:case"end":return n.stop()}},t)})),U.apply(this,arguments)}function W(t,s){return S.apply(this,arguments)}function S(){return S=E()(v()().mark(function t(s,a){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,B.Z)("/api/equipment/delete",i()({method:"POST",headers:{"Content-Type":"application/json"},data:s},a||{})));case 1:case"end":return n.stop()}},t)})),S.apply(this,arguments)}function q(t,s){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function t(s,a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/equipment/get",_objectSpread({method:"GET",params:_objectSpread({},s)},a||{})));case 1:case"end":return n.stop()}},t)})),F.apply(this,arguments)}function G(t,s){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function t(s,a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/equipment/get/vo",_objectSpread({method:"GET",params:_objectSpread({},s)},a||{})));case 1:case"end":return n.stop()}},t)})),P.apply(this,arguments)}function K(t,s){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function t(s,a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/equipment/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:s},a||{})));case 1:case"end":return n.stop()}},t)})),o.apply(this,arguments)}function r(t,s){return T.apply(this,arguments)}function T(){return T=E()(v()().mark(function t(s,a){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,B.Z)("/api/equipment/update",i()({method:"POST",headers:{"Content-Type":"application/json"},data:s},a||{})));case 1:case"end":return n.stop()}},t)})),T.apply(this,arguments)}var C=e(96906),c=e(51930),j=e(37476),Z=e(5966),u=e(2453),O=e(67294),m=e(85893),d=[{dataIndex:"eqId",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(s,a,f){return f+1}},{title:"\u5668\u6750\u540D\u79F0",dataIndex:"eqName",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5668\u6750\u63CF\u8FF0",dataIndex:"eqText",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(s,a,f,n){return[(0,m.jsx)("a",{onClick:function(){if(a.eqId){var p;n==null||(p=n.startEditable)===null||p===void 0||p.call(n,a.eqId)}},children:"\u7F16\u8F91"},"editable"),(0,m.jsx)(C.Z,{onSelect:function(p){p==="delete"&&a.eqId&&W({eqId:Number(a.eqId)}).then(function(l){console.log("\u5220\u9664\u54CD\u5E94:",l),l?(u.ZP.success("\u5220\u9664\u6210\u529F"),n==null||n.reload()):u.ZP.error("\u5220\u9664\u5931\u8D25")}).catch(function(l){console.error("\u5220\u9664\u9519\u8BEF:",l),u.ZP.error("\u5220\u9664\u5931\u8D25")})},menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}],L=function(){var t=(0,O.useRef)(),s=(0,O.useState)(!1),a=b()(s,2),f=a[0],n=a[1],V=function(){var p=E()(v()().mark(function l(y){var D,x;return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,g(y);case 3:D=h.sent,D?(u.ZP.success("\u6DFB\u52A0\u6210\u529F"),n(!1),(x=t.current)===null||x===void 0||x.reload()):u.ZP.error("\u6DFB\u52A0\u5931\u8D25"),h.next=11;break;case 7:h.prev=7,h.t0=h.catch(0),console.error("\u6DFB\u52A0\u9519\u8BEF:",h.t0),u.ZP.error("\u6DFB\u52A0\u5931\u8D25");case 11:case"end":return h.stop()}},l,null,[[0,7]])}));return function(y){return p.apply(this,arguments)}}();return(0,m.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,m.jsx)(c.Z,{columns:d,actionRef:t,cardBordered:!0,toolBarRender:function(){return[(0,m.jsx)("a",{onClick:function(){n(!0)},children:"\u65B0\u589E\u5668\u6750"},"add")]},request:function(){var p=E()(v()().mark(function l(y){var D;return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",y),I.next=3,(0,B.Z)("/api/equipment/list/page/vo",{method:"POST",data:{current:y.current,pageSize:y.pageSize,eqName:y.eqName}});case 3:return D=I.sent,console.log("\u54CD\u5E94\u6570\u636E:",D),I.abrupt("return",{data:D.records||[],success:!0,total:Number(D.total)||0});case 6:case"end":return I.stop()}},l)}));return function(l){return p.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var p=E()(v()().mark(function y(D,x){var I,h;return v()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,r({eqId:x.eqId,eqName:x.eqName,eqText:x.eqText});case 3:I=R.sent,console.log("\u66F4\u65B0\u54CD\u5E94:",I),I?(u.ZP.success("\u66F4\u65B0\u6210\u529F"),(h=t.current)===null||h===void 0||h.reload()):u.ZP.error("\u66F4\u65B0\u5931\u8D25"),R.next=12;break;case 8:R.prev=8,R.t0=R.catch(0),console.error("\u66F4\u65B0\u9519\u8BEF:",R.t0),u.ZP.error("\u66F4\u65B0\u5931\u8D25");case 12:case"end":return R.stop()}},y,null,[[0,8]])}));function l(y,D){return p.apply(this,arguments)}return l}()},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(l){console.log("value: ",l)}},rowKey:"eqId",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:function(l,y){return y==="get"?i()(i()({},l),{},{created_at:[l.startTime,l.endTime]}):l}},pagination:{pageSize:5,onChange:function(l){return console.log(l)}},dateFormatter:"string",headerTitle:""}),(0,m.jsxs)(j.Y,{title:"\u65B0\u589E\u5668\u6750",width:"400px",open:f,onOpenChange:n,onFinish:function(){var p=E()(v()().mark(function l(y){return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,V(y);case 2:case"end":return x.stop()}},l)}));return function(l){return p.apply(this,arguments)}}(),children:[(0,m.jsx)(Z.Z,{name:"eqName",label:"\u5668\u6750\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5668\u6750\u540D\u79F0"}]}),(0,m.jsx)(Z.Z,{name:"eqText",label:"\u5668\u6750\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5668\u6750\u63CF\u8FF0"}]})]})]})}}}]);
