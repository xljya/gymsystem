"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[722],{5966:function(F,B,r){var R=r(97685),i=r(1413),Z=r(91),M=r(21770),O=r(25040),p=r(55241),b=r(98423),C=r(67294),D=r(21885),f=r(85893),j=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],y="text",h=function(d){var e=d.fieldProps,l=d.proFieldProps,a=(0,Z.Z)(d,j);return(0,f.jsx)(D.Z,(0,i.Z)({valueType:y,fieldProps:e,filedConfig:{valueType:y},proFieldProps:l},a))},E=function(d){var e=(0,M.Z)(d.open||!1,{value:d.open,onChange:d.onOpenChange}),l=(0,R.Z)(e,2),a=l[0],u=l[1];return(0,f.jsx)(O.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(_){var t,m=_.getFieldValue(d.name||[]);return(0,f.jsx)(p.Z,(0,i.Z)((0,i.Z)({getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},onOpenChange:function(s){return u(s)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[(t=d.statusRender)===null||t===void 0?void 0:t.call(d,m),d.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:d.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},d.popoverProps),{},{open:a,children:d.children}))}})},v=function(d){var e=d.fieldProps,l=d.proFieldProps,a=(0,Z.Z)(d,I),u=(0,C.useState)(!1),n=(0,R.Z)(u,2),_=n[0],t=n[1];return e!=null&&e.statusRender&&a.name?(0,f.jsx)(E,{name:a.name,statusRender:e==null?void 0:e.statusRender,popoverProps:e==null?void 0:e.popoverProps,strengthText:e==null?void 0:e.strengthText,open:_,onOpenChange:t,children:(0,f.jsx)("div",{children:(0,f.jsx)(D.Z,(0,i.Z)({valueType:"password",fieldProps:(0,i.Z)((0,i.Z)({},(0,b.Z)(e,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(o){var s;e==null||(s=e.onBlur)===null||s===void 0||s.call(e,o),t(!1)},onClick:function(o){var s;e==null||(s=e.onClick)===null||s===void 0||s.call(e,o),t(!0)}}),proFieldProps:l,filedConfig:{valueType:y}},a))})}):(0,f.jsx)(D.Z,(0,i.Z)({valueType:"password",fieldProps:e,proFieldProps:l,filedConfig:{valueType:y}},a))},g=h;g.Password=v,g.displayName="ProFormComponent",B.Z=g},96906:function(F,B,r){r.d(B,{Z:function(){return l}});var R=r(91),i=r(1413),Z=r(56874),M=r(87462),O=r(67294),p=r(29245),b=r(32867),C=function(u,n){return O.createElement(b.Z,(0,M.Z)({},u,{ref:n,icon:p.Z}))},D=O.forwardRef(C),f=D,j=r(86413),I=r(21532),y=r(85418),h=r(83622),E=r(93967),v=r.n(E),g=r(85893),T=["key","name"],d=function(u){var n=u.children,_=u.menus,t=u.onSelect,m=u.className,o=u.style,s=(0,O.useContext)(I.ZP.ConfigContext),c=s.getPrefixCls,x=c("pro-table-dropdown"),P=(0,j.Q)({onClick:function(U){return t&&t(U.key)},items:_==null?void 0:_.map(function(S){return{label:S.name,key:S.key}})});return(0,g.jsx)(y.Z,(0,i.Z)((0,i.Z)({},P),{},{className:v()(x,m),children:(0,g.jsxs)(h.ZP,{style:o,children:[n," ",(0,g.jsx)(Z.Z,{})]})}))},e=function(u){var n=u.className,_=u.style,t=u.onSelect,m=u.menus,o=m===void 0?[]:m,s=u.children,c=(0,O.useContext)(I.ZP.ConfigContext),x=c.getPrefixCls,P=x("pro-table-dropdown"),S=(0,j.Q)({onClick:function(W){t==null||t(W.key)},items:o.map(function(U){var W=U.key,K=U.name,A=(0,R.Z)(U,T);return(0,i.Z)((0,i.Z)({key:W},A),{},{title:A.title,label:K})})});return(0,g.jsx)(y.Z,(0,i.Z)((0,i.Z)({},S),{},{className:v()(P,n),children:(0,g.jsx)("a",{style:_,children:s||(0,g.jsx)(f,{})})}))};e.Button=d;var l=e},29539:function(F,B,r){r.d(B,{DF:function(){return T},Mj:function(){return C},Uv:function(){return f},tW:function(){return v}});var R=r(15009),i=r.n(R),Z=r(97857),M=r.n(Z),O=r(99289),p=r.n(O),b=r(34955);function C(e,l){return D.apply(this,arguments)}function D(){return D=p()(i()().mark(function e(l,a){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.Z)("/api/goodsTransactions/add",M()({method:"POST",headers:{"Content-Type":"application/json"},data:l},a||{})));case 1:case"end":return n.stop()}},e)})),D.apply(this,arguments)}function f(e,l){return j.apply(this,arguments)}function j(){return j=p()(i()().mark(function e(l,a){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.Z)("/api/goodsTransactions/delete",M()({method:"POST",headers:{"Content-Type":"application/json"},data:l},a||{})));case 1:case"end":return n.stop()}},e)})),j.apply(this,arguments)}function I(e,l){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function e(l,a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goodsTransactions/get",_objectSpread({method:"GET",params:_objectSpread({},l)},a||{})));case 1:case"end":return n.stop()}},e)})),y.apply(this,arguments)}function h(e,l){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function e(l,a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/goodsTransactions/get/vo",_objectSpread({method:"GET",params:_objectSpread({},l)},a||{})));case 1:case"end":return n.stop()}},e)})),E.apply(this,arguments)}function v(e,l){return g.apply(this,arguments)}function g(){return g=p()(i()().mark(function e(l,a){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.Z)("/api/goodsTransactions/list/page/vo",M()({method:"POST",headers:{"Content-Type":"application/json"},data:l},a||{})));case 1:case"end":return n.stop()}},e)})),g.apply(this,arguments)}function T(e,l){return d.apply(this,arguments)}function d(){return d=p()(i()().mark(function e(l,a){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.Z)("/api/goodsTransactions/update",M()({method:"POST",headers:{"Content-Type":"application/json"},data:l},a||{})));case 1:case"end":return n.stop()}},e)})),d.apply(this,arguments)}},53398:function(F,B,r){r.r(B);var R=r(97857),i=r.n(R),Z=r(5574),M=r.n(Z),O=r(15009),p=r.n(O),b=r(99289),C=r.n(b),D=r(96906),f=r(51930),j=r(37476),I=r(5966),y=r(67294),h=r(2453),E=r(29539),v=r(85893),g=[{dataIndex:"id",valueType:"index",width:48,title:"\u5E8F\u53F7",hideInSearch:!0,editable:!1,render:function(d,e,l){return l+1}},{title:"\u5546\u54C1ID",dataIndex:"goodsId",hideInSearch:!1},{title:"\u4F1A\u5458ID",dataIndex:"memberId",hideInSearch:!1},{title:"\u8D2D\u4E70\u6570\u91CF",dataIndex:"count",hideInSearch:!0},{title:"\u603B\u4EF7",dataIndex:"price",hideInSearch:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",valueType:"dateTime",sorter:!0,hideInSearch:!0,editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(d,e,l,a){return[(0,v.jsx)("a",{onClick:function(){if(e.id){var n;a==null||(n=a.startEditable)===null||n===void 0||n.call(a,e.id)}},children:"\u7F16\u8F91"},"editable"),(0,v.jsx)(D.Z,{onSelect:function(){var u=C()(p()().mark(function n(_){var t;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(_==="delete"&&e.id)){o.next=13;break}return o.prev=1,o.next=4,(0,E.Uv)({id:e.id});case 4:t=o.sent,console.log("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",t),t?(h.ZP.success("\u5220\u9664\u6210\u529F"),a==null||a.reload()):h.ZP.error("\u5220\u9664\u5931\u8D25"),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(1),console.error("\u5220\u9664\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",o.t0),h.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return o.stop()}},n,null,[[1,9]])}));return function(n){return u.apply(this,arguments)}}(),menus:[{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];B.default=function(){var T=(0,y.useRef)(),d=(0,y.useState)(!1),e=M()(d,2),l=e[0],a=e[1],u=function(){var n=C()(p()().mark(function _(t){var m,o;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,E.Mj)(t);case 3:m=c.sent,console.log("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",m),m?(h.ZP.success("\u6DFB\u52A0\u6210\u529F"),a(!1),(o=T.current)===null||o===void 0||o.reload()):h.ZP.error("\u6DFB\u52A0\u5931\u8D25"),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),console.error("\u6DFB\u52A0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",c.t0),h.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return c.stop()}},_,null,[[0,8]])}));return function(t){return n.apply(this,arguments)}}();return(0,v.jsxs)("div",{style:{minHeight:"calc(100vh - 120px)",paddingBottom:"120px",marginBottom:"60px"},children:[(0,v.jsx)(f.Z,{columns:g,actionRef:T,cardBordered:!0,toolBarRender:function(){return[(0,v.jsx)("a",{onClick:function(){a(!0)},children:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55"},"add")]},request:function(){var n=C()(p()().mark(function _(t){var m;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("\u8BF7\u6C42\u53C2\u6570:",t),s.prev=1,s.next=4,(0,E.tW)({current:t.current,pageSize:t.pageSize,goodsId:t.goodsId,memberId:t.memberId,countMin:t.countMin,countMax:t.countMax,priceMin:t.priceMin,priceMax:t.priceMax,createTimeStart:t.createTimeStart,createTimeEnd:t.createTimeEnd,sortField:t.sortField,sortOrder:t.sortOrder});case 4:return m=s.sent,console.log("\u54CD\u5E94\u6570\u636E:",m),s.abrupt("return",{data:m.records||[],success:!0,total:Number(m.total)||0});case 9:return s.prev=9,s.t0=s.catch(1),console.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25:",s.t0),h.ZP.error("\u83B7\u53D6\u9500\u552E\u8BB0\u5F55\u5217\u8868\u5931\u8D25"),s.abrupt("return",{data:[],success:!1,total:0});case 14:case"end":return s.stop()}},_,null,[[1,9]])}));return function(_){return n.apply(this,arguments)}}(),editable:{type:"single",onSave:function(){var n=C()(p()().mark(function t(m,o){var s,c;return p()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,(0,E.DF)({id:o.id,goodsId:o.goodsId,memberId:o.memberId,count:o.count,price:o.price});case 3:s=P.sent,console.log("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u54CD\u5E94:",s),s?(h.ZP.success("\u66F4\u65B0\u6210\u529F"),(c=T.current)===null||c===void 0||c.reload()):h.ZP.error("\u66F4\u65B0\u5931\u8D25"),P.next=12;break;case 8:P.prev=8,P.t0=P.catch(0),console.error("\u66F4\u65B0\u9500\u552E\u8BB0\u5F55\u5931\u8D25:",P.t0),h.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return P.stop()}},t,null,[[0,8]])}));function _(t,m){return n.apply(this,arguments)}return _}()},columnsState:{persistenceKey:"goods-transactions-manage-table",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}}},rowKey:"id",search:{labelWidth:"auto",span:8,defaultCollapsed:!1},options:{setting:{listsHeight:400},density:!0,fullScreen:!0,reload:!0},form:{syncToUrl:!0},pagination:{pageSize:5,onChange:function(_){return console.log(_)}},dateFormatter:"string",headerTitle:""}),(0,v.jsxs)(j.Y,{title:"\u65B0\u589E\u9500\u552E\u8BB0\u5F55",width:"400px",open:l,onOpenChange:a,onFinish:function(){var n=C()(p()().mark(function _(t){var m;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return m=i()(i()({},t),{},{goodsId:Number(t.goodsId),memberId:t.memberId,count:Number(t.count),price:Number(t.price)}),s.next=3,u(m);case 3:case"end":return s.stop()}},_)}));return function(_){return n.apply(this,arguments)}}(),children:[(0,v.jsx)(I.Z,{name:"goodsId",label:"\u5546\u54C1ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1ID"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57ID"}]}),(0,v.jsx)(I.Z,{name:"memberId",label:"\u4F1A\u5458ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F1A\u5458ID"}]}),(0,v.jsx)(I.Z,{name:"count",label:"\u8D2D\u4E70\u6570\u91CF",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D2D\u4E70\u6570\u91CF"},{pattern:/^\d+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u6570\u5B57"}]}),(0,v.jsx)(I.Z,{name:"price",label:"\u5355\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4EF7"},{pattern:/^\d+(\.\d{1,2})?$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u91D1\u989D"}]})]})]})}}}]);
