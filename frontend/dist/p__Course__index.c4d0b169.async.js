"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[949],{32497:function(ce,L,s){s.d(L,{G7:function(){return p},P0:function(){return F},Tn:function(){return W}});var X=s(15009),h=s.n(X),q=s(97857),P=s.n(q),ee=s(99289),m=s.n(ee),U=s(34955);function p(o,g){return D.apply(this,arguments)}function D(){return D=m()(h()().mark(function o(g,N){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,U.Z)("/api/course/booking/add",P()({method:"POST",headers:{"Content-Type":"application/json"},data:g},N||{})));case 1:case"end":return t.stop()}},o)})),D.apply(this,arguments)}function W(o,g){return e.apply(this,arguments)}function e(){return e=m()(h()().mark(function o(g,N){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,U.Z)("/api/course/booking/delete",P()({method:"POST",headers:{"Content-Type":"application/json"},data:g},N||{})));case 1:case"end":return t.stop()}},o)})),e.apply(this,arguments)}function ae(o,g){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function o(g,N){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/course/booking/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:g},N||{})));case 1:case"end":return t.stop()}},o)})),k.apply(this,arguments)}function F(o,g){return M.apply(this,arguments)}function M(){return M=m()(h()().mark(function o(g,N){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,U.Z)("/api/course/booking/update",P()({method:"POST",headers:{"Content-Type":"application/json"},data:g},N||{})));case 1:case"end":return t.stop()}},o)})),M.apply(this,arguments)}},38390:function(ce,L,s){s.r(L),s.d(L,{default:function(){return Se}});var X=s(15009),h=s.n(X),q=s(99289),P=s.n(q),ee=s(5574),m=s.n(ee),U=s(90930),p=s(67294),D=s(15133),W=s(27080),e=s(85893),ae=function(r){var u=r.categories,c=r.selectedCategory,v=r.onSelectCategory;return(0,e.jsx)("div",{className:"flex flex-wrap gap-2 mb-8",children:u.map(function(j){return(0,e.jsx)(D.Link,{to:"/course/".concat(j.id),style:{textDecoration:"none"},onClick:function(){return v(j.name)},children:(0,e.jsx)("button",{type:"button",className:(0,W.cn)("px-4 py-2 rounded-full text-sm font-medium transition-all w-full h-full",c===j.name?"bg-fitness-red text-white":"bg-gray-100 text-fitness-dark hover:bg-gray-200"),children:j.name})},j.id)})})},k=ae,F=s(87030),M=s(97857),o=s.n(M),g=s(13769),N=s.n(g),_=s(12003),t=["className","variant"],de=(0,_.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne(b){var r=b.className,u=b.variant,c=N()(b,t);return(0,e.jsx)("div",o()({className:(0,W.cn)(de({variant:u}),r)},c))}var me=function(r){switch(r){case"low":return"bg-green-100 text-green-800 hover:bg-green-200";case"medium":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"high":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},fe=function(r){switch(r){case"low":return"\u4F4E\u5F3A\u5EA6";case"medium":return"\u4E2D\u5F3A\u5EA6";case"high":return"\u9AD8\u5F3A\u5EA6";default:return"\u672A\u77E5"}},he=function(r){var u=r.fitnessClass,c=r.trainer,v=u.image;if(v.includes("img.liuyueyue.top")&&!v.includes("!/fw/300")){var j=v.split("?"),B=m()(j,2),O=B[0],E=B[1];v="".concat(O,"!/fw/300").concat(E?"?"+E:"")}return(0,e.jsxs)(F.Zb,{className:"fitness-card h-full flex flex-col overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,e.jsxs)("div",{className:"relative h-48",children:[(0,e.jsx)("img",{src:v,alt:u.title,className:"w-full h-full object-cover"}),(0,e.jsx)("div",{className:"absolute top-2 right-2",children:(0,e.jsx)(ne,{className:"".concat(me(u.intensity)," transition-colors"),children:fe(u.intensity)})})]}),(0,e.jsxs)(F.aY,{className:"flex flex-col flex-grow p-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,e.jsx)("h3",{className:"text-lg font-bold group-hover:text-fitness-red transition-colors",children:u.title}),(0,e.jsxs)(ne,{variant:"outline",className:"border-fitness-red text-fitness-red",children:[u.duration,"\u5206\u949F"]})]}),(0,e.jsx)("p",{className:"text-sm text-fitness-gray mb-4",children:u.category}),(0,e.jsx)("p",{className:"text-sm line-clamp-3 mb-4 flex-grow text-gray-600",children:u.description}),(0,e.jsx)("div",{className:"mt-auto pt-3 border-t border-gray-200",children:(0,e.jsx)("div",{className:"flex justify-between items-center",children:c&&(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("img",{src:c.coachAvatar,alt:c.coachName,className:"w-8 h-8 rounded-full mr-2 border border-gray-200"}),(0,e.jsx)("span",{className:"text-sm font-medium text-gray-700",children:c.coachName})]})})})]})]})},ge=he,xe=function(){return(0,e.jsxs)("section",{className:"relative bg-fitness-dark text-white py-16 md:py-24",children:[(0,e.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,e.jsx)("img",{src:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80",alt:"Fitness Hero Background",className:"w-full h-full object-cover opacity-30"})}),(0,e.jsx)("div",{className:"fitness-container relative z-10",children:(0,e.jsxs)("div",{className:"max-w-2xl",children:[(0,e.jsx)("span",{className:"inline-block bg-fitness-red text-white px-3 py-1 text-sm font-medium rounded mb-4",children:"\u5168\u65B0\u8BFE\u7A0B\u4E0A\u7EBF"}),(0,e.jsxs)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:["\u53D1\u73B0 ",(0,e.jsx)("span",{className:"text-fitness-red",children:"\u6700\u4F73"})," \u7684\u5065\u8EAB\u8BFE\u7A0B"]}),(0,e.jsx)("p",{className:"text-lg md:text-xl mb-8 text-gray-200",children:"\u63A2\u7D22\u6700\u4E13\u4E1A\u7684\u5065\u8EAB\u8BFE\u7A0B\uFF0C\u7531\u4E13\u4E1A\u6559\u7EC3\u6307\u5BFC\uFF0C\u8BA9\u4F60\u7684\u5065\u8EAB\u4E4B\u65C5\u66F4\u52A0\u9AD8\u6548\u548C\u6709\u8DA3\u3002"}),(0,e.jsxs)("div",{className:"mt-10 flex flex-col md:flex-row gap-6 md:gap-12",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"10+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u4E13\u4E1A\u8BFE\u7A0B"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"5+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u8D44\u6DF1\u6559\u7EC3"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-3xl font-bold text-fitness-red",children:"100+"}),(0,e.jsx)("span",{className:"text-sm",children:"\u5B66\u5458\u597D\u8BC4"})]})]})]})})]})},pe=xe,$=s(69696),ve=s(32497),se=s(17788),G=["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"],je=function(r){var u=r.classes,c=r.currentUser,v=(0,p.useState)(null),j=m()(v,2),B=j[0],O=j[1],E=(0,p.useState)(!1),V=m()(E,2),z=V[0],w=V[1],H=(0,p.useState)(""),Y=m()(H,2),Q=Y[0],te=Y[1],J=G.reduce(function(n,a){var y=[];return u.forEach(function(C){C.schedule.forEach(function(f){if(f.day===a){var A=f.scheduleId?f.scheduleId.toString():"";y.push(o()(o()({},C),{},{actualScheduleId:A,actualDay:f.day,actualTime:f.time}))}})}),y.sort(function(C,f){return C.actualTime.localeCompare(f.actualTime)}),n[a]=y,n},{}),re=function(){var n=P()(h()().mark(function a(y,C){var f,A,T;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("[ScheduleSection] handleBooking called with:",{scheduleId:y,courseName:C}),console.log("[ScheduleSection] currentUser:",c),f=c.id,console.log("[ScheduleSection] Attempting to book scheduleId: ".concat(y," for memberId: ").concat(f)),O(y),l.prev=5,A={scheduleId:Number(y),memberId:f},console.log("[ScheduleSection] API call params:",A),l.next=10,(0,ve.G7)(A);case 10:T=l.sent,console.log("[ScheduleSection] API response:",T),T?(te(C),w(!0)):(console.error("[ScheduleSection] \u9884\u7EA6API\u9519\u8BEF:"),se.Z.error({title:"\u9884\u7EA6\u5931\u8D25",content:"\u64CD\u4F5C\u672A\u6210\u529F\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"})),l.next=19;break;case 15:l.prev=15,l.t0=l.catch(5),console.error("[ScheduleSection] Catch block error:",l.t0),se.Z.error({title:"\u9884\u7EA6\u5931\u8D25",content:(l.t0===null||l.t0===void 0?void 0:l.t0.message)||"\u8BF7\u7A0D\u540E\u518D\u8BD5"});case 19:return l.prev=19,O(null),console.log("[ScheduleSection] handleBooking finished."),l.finish(19);case 23:case"end":return l.stop()}},a,null,[[5,15,19,23]])}));return function(y,C){return n.apply(this,arguments)}}();return(0,e.jsx)("section",{id:"schedule",className:"py-12",children:(0,e.jsxs)("div",{className:"fitness-container",children:[(0,e.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"\u8BFE\u7A0B\u65E5\u7A0B\u8868"}),(0,e.jsxs)($.mQ,{defaultValue:G[0],className:"w-full",children:[(0,e.jsx)($.dr,{className:"mb-6 w-full flex flex-wrap h-auto bg-transparent justify-start border-b",children:G.map(function(n){return(0,e.jsx)($.SP,{value:n,className:"data-[state=active]:border-fitness-red data-[state=active]:text-fitness-red border-b-2 border-transparent px-4 py-2 rounded-none",children:n},n)})}),G.map(function(n){return(0,e.jsx)($.nU,{value:n,className:"mt-0",children:J[n].length===0?(0,e.jsx)(F.Zb,{className:"bg-gray-50",children:(0,e.jsx)(F.aY,{className:"p-8 text-center",children:(0,e.jsx)("p",{className:"text-fitness-gray",children:"\u8FD9\u4E00\u5929\u6CA1\u6709\u5B89\u6392\u8BFE\u7A0B"})})}):(0,e.jsx)("div",{className:"space-y-4",children:J[n].map(function(a){return(0,e.jsx)(F.Zb,{className:"overflow-hidden",children:(0,e.jsx)(F.aY,{className:"p-0",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,e.jsx)("div",{className:"sm:w-24 bg-fitness-red text-white p-4 flex items-center justify-center text-center",children:(0,e.jsx)("span",{className:"text-xl font-bold",children:a.actualTime})}),(0,e.jsxs)("div",{className:"flex-grow p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,e.jsxs)("div",{className:"flex-grow",children:[(0,e.jsx)("h4",{className:"font-bold",children:a.title}),(0,e.jsxs)("p",{className:"text-sm text-fitness-gray",children:[a.category," \u2022 ",a.duration,"\u5206\u949F"]})]}),(0,e.jsx)("button",{type:"button",className:"fitness-btn-secondary px-4 py-2",onClick:function(){return re(a.actualScheduleId,a.title)},disabled:B===a.actualScheduleId,children:B===a.actualScheduleId?"\u9884\u7EA6\u4E2D...":"\u9884\u7EA6"})]})]})})},"".concat(a.id,"-").concat(a.actualScheduleId,"-").concat(n))})})},n)})]}),(0,e.jsx)(se.Z,{title:"\u9884\u7EA6\u6210\u529F",open:z,onOk:function(){return w(!1)},onCancel:function(){return w(!1)},okText:"\u786E\u5B9A",cancelText:"\u5173\u95ED",children:(0,e.jsxs)("p",{children:['\u8BFE\u7A0B "',Q,'" \u9884\u7EA6\u6210\u529F\uFF01']})})]})})},ye=je,K=s(40396),le=s(2453),be=s(74330),Ce=function(){var r=(0,D.useParams)(),u=(0,D.useModel)("@@initialState"),c=u.initialState,v=c==null?void 0:c.currentUser,j=(0,p.useState)(!0),B=m()(j,2),O=B[0],E=B[1],V=(0,p.useState)([]),z=m()(V,2),w=z[0],H=z[1],Y=(0,p.useState)([]),Q=m()(Y,2),te=Q[0],J=Q[1],re=(0,p.useState)([]),n=m()(re,2),a=n[0],y=n[1],C=(0,p.useState)("\u5168\u90E8"),f=m()(C,2),A=f[0],T=f[1],ue=function(){var d=P()(h()().mark(function S(I){var R;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,E(!0),i.next=4,(0,K.gS)(I);case 4:R=i.sent,H(R),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),console.error("\u83B7\u53D6\u5206\u7C7B\u8BFE\u7A0B\u5931\u8D25:",i.t0),le.ZP.error("\u83B7\u53D6\u8BFE\u7A0B\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");case 12:return i.prev=12,E(!1),i.finish(12);case 15:case"end":return i.stop()}},S,null,[[0,8,12,15]])}));return function(I){return d.apply(this,arguments)}}();(0,p.useEffect)(function(){var d=function(){var S=P()(h()().mark(function I(){var R,Z,i,ie,oe;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,E(!0),x.next=4,Promise.all([(0,K.pE)(),(0,K.gS)(),(0,K.im)()]);case 4:R=x.sent,Z=m()(R,3),i=Z[0],ie=Z[1],oe=Z[2],y(i),H(ie),J(oe),x.next=18;break;case 14:x.prev=14,x.t0=x.catch(0),console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",x.t0),le.ZP.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5");case 18:return x.prev=18,E(!1),x.finish(18);case 21:case"end":return x.stop()}},I,null,[[0,14,18,21]])}));return function(){return S.apply(this,arguments)}}();d()},[]),(0,p.useEffect)(function(){if(r.id){var d=a.find(function(S){return S.id===r.id});d&&(T(d.name),d.name!=="\u5168\u90E8"&&ue(r.id))}else T("\u5168\u90E8")},[r.id,a]);var l=A==="\u5168\u90E8"?w:w.filter(function(d){return d.category===A}),Ne=function(S){return te.find(function(I){return I.coachId===S})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(pe,{}),(0,e.jsx)(U._z,{header:{title:!1},style:{backgroundColor:"rgb(249,250,251)"},children:(0,e.jsx)("section",{id:"classes",className:"py-12 bg-gray-50",children:(0,e.jsxs)("div",{className:"fitness-container",children:[(0,e.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-3xl font-bold",children:"\u63A2\u7D22\u6211\u4EEC\u7684\u8BFE\u7A0B"}),(0,e.jsx)("p",{className:"text-fitness-gray mt-2",children:"\u627E\u5230\u6700\u9002\u5408\u4F60\u7684\u5065\u8EAB\u8BFE\u7A0B\uFF0C\u5F00\u59CB\u4F60\u7684\u5065\u5EB7\u4E4B\u65C5"})]}),(0,e.jsx)(k,{categories:a,selectedCategory:A,onSelectCategory:function(S){T(S)}})]}),O?(0,e.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,e.jsx)(be.Z,{size:"large",tip:"\u52A0\u8F7D\u8BFE\u7A0B\u4E2D..."})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(function(d){return(0,e.jsx)(ge,{fitnessClass:d,trainer:Ne(d.coachId),currentUser:v},d.id)})}),l.length===0&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)("h3",{className:"text-xl font-medium text-fitness-gray",children:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u8BFE\u7A0B"}),(0,e.jsx)("p",{className:"mt-2",children:"\u8BF7\u5C1D\u8BD5\u9009\u62E9\u5176\u4ED6\u7C7B\u522B"})]})]})]})})}),(0,e.jsx)(U._z,{header:{title:!1},style:{backgroundColor:"rgb(241, 241, 241)"},children:(0,e.jsx)(ye,{classes:w,currentUser:v})})]})},Se=Ce}}]);
