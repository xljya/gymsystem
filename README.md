# å¥èº«æˆ¿ç®¡ç†ç³»ç»Ÿ - å‰ç«¯

æœ¬ä»“åº“æ˜¯å¥èº«æˆ¿ç®¡ç†ç³»ç»Ÿçš„å‰ç«¯éƒ¨åˆ†ï¼ŒåŸºäºŽ Ant Design Pro v6ã€UmiJS 4 å’Œ React 18 æž„å»ºã€‚é¡¹ç›®åœ¨ Ant Design Pro çš„åŸºç¡€ä¸Šï¼Œåˆ›æ–°æ€§åœ°æ•´åˆäº† Tailwind CSS å’Œ shadcn/uiï¼Œæ—¨åœ¨æ‰“é€ ä¸€ä¸ªçŽ°ä»£åŒ–ã€é«˜æ•ˆçŽ‡ã€æ˜“äºŽç»´æŠ¤çš„ä¼ä¸šçº§ä¸­åŽå°åº”ç”¨ã€‚

## âœ¨ æŠ€æœ¯æ ˆ (Technology Stack)

-   **æ¡†æž¶**: [UmiJS 4](https://umijs.org/) & [Ant Design Pro V6](https://pro.ant.design/)
-   **æ ¸å¿ƒåº“**: [React 18](https://reactjs.org/)
-   **UI & æ ·å¼**:
    -   [Ant Design 5](https://ant.design/) & [@ant-design/pro-components](https://procomponents.ant.design/)
    -   [Tailwind CSS](https://tailwindcss.com/)
    -   [shadcn/ui](https://ui.shadcn.com/)
-   **API & çŠ¶æ€ç®¡ç†**:
    -   [umi-request](https://github.com/umijs/umi-request) (åŸºäºŽ Fetch çš„å°è£…)
    -   OpenAPI è‡ªåŠ¨ç”Ÿæˆ API ä»£ç 
-   **è¯­è¨€**: [TypeScript](https://www.typescriptlang.org/)

## ðŸš€ æ ¸å¿ƒç‰¹æ€§ (Core Features)

-   **æ··åˆ UI ç­–ç•¥**: ç»“åˆäº† Ant Design å¼ºå¤§çš„å¼€ç®±å³ç”¨ç»„ä»¶ã€Tailwind CSS çš„åŽŸå­åŒ– CSS å¿«é€Ÿæž„å»ºèƒ½åŠ›ä»¥åŠ shadcn/ui çš„ä¼˜é›…è®¾è®¡ï¼Œæä¾›äº†çµæ´»è€Œå¼ºå¤§çš„ UI æž„å»ºä½“éªŒã€‚
-   **è‡ªåŠ¨åŒ– API å±‚**: `src/api` ç›®å½•ä¸‹çš„æ‰€æœ‰è¯·æ±‚ä»£ç å‡é€šè¿‡ OpenAPI è§„èŒƒè‡ªåŠ¨ç”Ÿæˆï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™ API è°ƒç”¨ä»£ç ï¼Œæžå¤§æå‡äº†ä¸ŽåŽç«¯åä½œçš„æ•ˆçŽ‡ã€‚
-   **ç»Ÿä¸€è¯·æ±‚å¤„ç†**: åœ¨ `src/utils/request.ts` ä¸­é€šè¿‡æ‹¦æˆªå™¨å®žçŽ°äº†å…¨å±€çš„è¯·æ±‚ä¸Žå“åº”å¤„ç†ã€‚è‡ªåŠ¨ä¸ºè¯·æ±‚æ³¨å…¥è®¤è¯ `Token`ï¼Œå¹¶å¯¹å“åº”è¿›è¡Œç»Ÿä¸€çš„æ•°æ®ç»“æž„è§£æžå’Œé”™è¯¯å¤„ç†ï¼ˆå¦‚æœªç™»å½•è‡ªåŠ¨è·³è½¬ï¼‰ã€‚
-   **çŽ¯å¢ƒåˆ†ç¦»**: é€šè¿‡ `config/proxy.ts` å’ŒçŽ¯å¢ƒå˜é‡ï¼Œè½»æ¾å®žçŽ°å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§çŽ¯å¢ƒçš„ API åœ°å€åˆ†ç¦»ä¸Žä»£ç†ã€‚
-   **é…ç½®åŒ–è·¯ç”±**: åœ¨ `config/routes.ts` ä¸­é›†ä¸­ç®¡ç†é¡¹ç›®çš„æ‰€æœ‰è·¯ç”±ï¼Œç»“æž„æ¸…æ™°ï¼Œæ˜“äºŽç»´æŠ¤ã€‚

## ðŸ“ é¡¹ç›®ç»“æž„ (Project Structure)

```
â”œâ”€â”€ config/                # UmiJS é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.ts          # æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ proxy.ts           # ä»£ç†é…ç½®
â”‚   â””â”€â”€ routes.ts          # è·¯ç”±é…ç½®
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ src/                   # æºç ç›®å½•
â”‚   â”œâ”€â”€ api/               # è‡ªåŠ¨ç”Ÿæˆçš„ API æœåŠ¡
â”‚   â”œâ”€â”€ components/        # è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶ (æŽ¨èä½¿ç”¨ shadcn/ui é£Žæ ¼)
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°ï¼ŒåŒ…å« request å°è£…
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ app.tsx            # Umi å…¨å±€è¿è¡Œæ—¶é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â””â”€â”€ tailwind.css           # Tailwind CSS å…¥å£æ–‡ä»¶
```

## æœ¬åœ°å¼€å‘ (Local Development)

1.  **çŽ¯å¢ƒå‡†å¤‡**: ç¡®ä¿ä½ çš„å¼€å‘çŽ¯å¢ƒå·²ç»å®‰è£…äº† Node.js >=16.0.0ã€‚

2.  **å®‰è£…ä¾èµ–**:
    ```bash
    npm install
    ```

3.  **å¯åŠ¨é¡¹ç›®**:
    æ­¤å‘½ä»¤ä¼šåŒæ—¶å¯åŠ¨ Tailwind CSS çš„å®žæ—¶ç¼–è¯‘å’Œ UmiJS çš„å¼€å‘æœåŠ¡å™¨ã€‚
    ```bash
    npm run start:dev
    ```

4.  **æž„å»ºé¡¹ç›®**:
    ```bash
    npm run build
    ```

5.  **ä»£ç é£Žæ ¼æ£€æŸ¥**:
    ```bash
    npm run lint
    ```

## ðŸŒ API è¯·æ±‚æµç¨‹ (API Request Flow)

ä¸‹é¢æ˜¯é¡¹ç›®ä¸­ä¸€ä¸ªå®Œæ•´çš„ API è¯·æ±‚æ‰€ç»åŽ†çš„æµç¨‹å›¾ï¼š

```mermaid
graph TD
    A[é¡µé¢/ç»„ä»¶è°ƒç”¨ API å‡½æ•°] --> B{src/api/*.ts};
    B --> C[è°ƒç”¨ç»Ÿä¸€ request æ–¹æ³•];
    C --> D[è¯·æ±‚æ‹¦æˆªå™¨: æ³¨å…¥Token];
    D --> E[umi-request: å‘é€HTTPè¯·æ±‚];
    E --> F[åŽç«¯æœåŠ¡å™¨];
    F --> G[umi-request: æŽ¥æ”¶HTTPå“åº”];
    G --> H{å“åº”æ‹¦æˆªå™¨};
    H -- code === 0 --> I[è¿”å›ž res.data];
    H -- ç™»å½•æŽ¥å£ --> J[ä¿å­˜Tokenå¹¶è¿”å›ž];
    H -- code === 40100 --> K[æç¤ºå¹¶è·³è½¬ç™»å½•é¡µ];
    H -- å…¶ä»–é”™è¯¯ --> L[æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸];
    I --> M[é¡µé¢/ç»„ä»¶æ‹¿åˆ°æ•°æ®];
    J --> M;
    K --> M;
    L --> M;
```

